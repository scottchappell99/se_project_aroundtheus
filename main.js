!function(){"use strict";const e=document.querySelector(".profile__add-button"),t=document.querySelector(".profile__edit-button"),s={name:document.querySelector(".profile__name"),about:document.querySelector(".profile__subtitle"),avatar:document.querySelector(".profile__avatar")},r={name:document.querySelector(".modal__name"),about:document.querySelector(".modal__subtitle")},i=document.querySelector(".profile__avatar-button");document.querySelector("#modal-add"),document.querySelector("#modal-edit"),document.querySelector("#modal-avatar");class n{constructor(e,t,s,r,i,n){this._name=e.name,this._link=e.link,this.id=e._id,this._isLiked=e.isLiked,this._cardSelector=t,this._clickFunction=s,this._deleteFunction=r,this._removeLikeFromServer=i,this._sendLikeToServer=n,this._cardTemplate=document.querySelector(this._cardSelector).content.firstElementChild}_handleLikeClick(){this.cardElement.querySelector(".card__liked_active")?this._removeLikeFromServer(this.id).then((()=>this._likeButton.classList.remove("card__liked_active"))).catch((e=>console.error(e))):this._sendLikeToServer(this.id).then((()=>this._likeButton.classList.add("card__liked_active"))).catch((e=>console.error(e)))}_handleDeleteClick(e){this._deleteFunction(this.id,e)}_setEventListeners(){this._likeButton.addEventListener("click",(()=>this._handleLikeClick())),this._deleteButton.addEventListener("click",(e=>this._handleDeleteClick(e))),this.cardImage.addEventListener("click",(()=>this._clickFunction(this._link,this._name)))}generateCard(){return this.cardElement=this._cardTemplate.cloneNode(!0),this.cardCaption=this.cardElement.querySelector(".card__caption"),this.cardImage=this.cardElement.querySelector(".card__image"),this._likeButton=this.cardElement.querySelector(".card__like"),this._deleteButton=this.cardElement.querySelector(".card__delete-button"),this.cardImage.src=this._link,this.cardImage.alt=this._name,this.cardImage.id=this.id,this.cardCaption.textContent=this._name,this._isLiked&&this._likeButton.classList.add("card__liked_active"),this._setEventListeners(),this.cardElement}_addLike(){this._sendLikeToServer(this.id).then((()=>this._likeButton.classList.add("card__liked_active"))).catch((e=>console.error(e)))}_removeLike(){this._removeLikeFromServer(this.id).then((()=>this._likeButton.classList.remove("card__liked_active"))).catch((e=>console.error(e)))}}class o{constructor(e,t){this._config=e,this._formElement=t}_showInputError(e){this._errorMessageElement=this._formElement.querySelector(`#${e.id}-error`),e.classList.add(this._config.inputErrorClass),this._errorMessageElement.textContent=e.validationMessage,this._errorMessageElement.classList.add(this._config.errorClass)}_hideInputError(e){this._errorMessageElement=this._formElement.querySelector(`#${e.id}-error`),e.classList.remove(this._config.inputErrorClass),this._errorMessageElement.textContent="",this._errorMessageElement.classList.remove(this._config.errorClass)}resetValidation(){this._inputElements.forEach((e=>this._hideInputError(e))),this.disableSubmitButton()}_checkInputValidity(e){e.validity.valid?this._hideInputError(e):this._showInputError(e)}_checkFormValidity=()=>this._inputElements.every((e=>e.validity.valid));disableSubmitButton(){this._submitButton.classList.add(this._config.inactiveButtonClass),this._submitButton.disabled=!0}enableSubmitButton(){this._submitButton.classList.remove(this._config.inactiveButtonClass),this._submitButton.disabled=!1}_toggleButtonState(){this._isFormValid=this._checkFormValidity(this._inputElements),this._isFormValid?this.enableSubmitButton():this.disableSubmitButton()}_setEventListeners(){this._inputElements=[...this._formElement.querySelectorAll(this._config.inputSelector)],this._submitButton=this._formElement.querySelector(this._config.submitButtonSelector),this._inputElements.forEach((e=>{e.addEventListener("input",(()=>{this._checkInputValidity(e),this._toggleButtonState()}))}))}enableValidation(){this._formElement.addEventListener("submit",(e=>{e.preventDefault()})),this._setEventListeners()}}class a{constructor(e,t){let{items:s,renderer:r}=e;this._items=s,this._renderer=r,this._elementContainer=document.querySelector(t)}renderItems(){this._items.forEach((e=>{this._renderer(e)}))}addItem(e,t){"append"===t?this._elementContainer.append(e):"prepend"===t&&this._elementContainer.prepend(e)}}class l{constructor(e){this._popupElement=document.querySelector(e),this._closeButton=this._popupElement.querySelector(".modal__close")}open(){this._popupElement.classList.add("modal_opened"),document.addEventListener("keydown",this._handleEscClose)}close=()=>{this._popupElement.classList.remove("modal_opened"),document.removeEventListener("keydown",this._handleEscClose)};_handleEscClose=e=>{"Escape"===e.key&&this.close()};_handleClickClose=e=>{e.target===this._popupElement&&this.close()};setEventListeners(){this._closeButton.addEventListener("click",this.close),this._popupElement.addEventListener("click",(e=>this._handleClickClose(e)))}}class c extends l{constructor(e,t){super(e),this._popupForm=this._popupElement.querySelector(".modal__form"),this._callbackFunction=t,this._button=this._popupElement.querySelector(".modal__button")}_getInputValues(){return this._inputValues=Array.from(this._popupForm.querySelectorAll(".modal__input")),this._data={},this._inputValues.forEach((e=>{this._data[e.name]=e.value})),this._data}setEventListeners(){super.setEventListeners(),this._popupElement.addEventListener("submit",(()=>{this._callbackFunction(this._getInputValues())}))}clearForm(){this._popupForm.reset()}renderLoading(e,t){e?(this._buttonText=this._button.textContent,this._button.textContent=t):this._button.textContent=this._buttonText}}class d{constructor(e){let{name:t,about:s,avatar:r}=e;this._name=t,this._about=s,this._avatar=r}getUserInfo(){return this.presentUserInfo={name:this._name,about:this._about},this.presentUserInfo}setUserInfo(e){return e.name.textContent=this._name,e.about.textContent=this._about,e.avatar.src=this._avatar,e.avatar.alt=`${this._name}, ${this._about}`,e}changeUserInfo(e){this._name=e.name,this._about=e.about}changeAvatar(e){this._avatar=e}}const h=new class{constructor(e){let{baseUrl:t,headers:s}=e;this._baseUrl=t,this._headers=s}_checkResponse(e){return e.ok?e.json():Promise.reject(`Error: ${e.status}`)}_request(e,t){return fetch(e,t).then(this._checkResponse)}getUserInfo(){return this._request(`${this._baseUrl}/users/me`,{headers:this._headers})}editUserInfo(e){let{name:t,about:s}=e;return this._request(`${this._baseUrl}/users/me`,{method:"PATCH",headers:this._headers,body:JSON.stringify({name:t,about:s})})}changeProfilePicture(e){return this._request(`${this._baseUrl}/users/me/avatar`,{method:"PATCH",headers:this._headers,body:JSON.stringify({avatar:e.avatar})})}getInitialCards(){return this._request(`${this._baseUrl}/cards`,{headers:this._headers})}addCard(e){let{name:t,link:s}=e;return this._request(`${this._baseUrl}/cards`,{method:"POST",headers:this._headers,body:JSON.stringify({name:t,link:s})})}deleteCard(e){return this._request(`${this._baseUrl}/cards/${e}`,{method:"DELETE",headers:this._headers})}addLikeToCard(e){return this._request(`${this._baseUrl}/cards/${e}/likes`,{method:"PUT",headers:this._headers})}removeLikeFromCard(e){return this._request(`${this._baseUrl}/cards/${e}/likes`,{method:"DELETE",headers:this._headers})}}({baseUrl:"https://around-api.en.tripleten-services.com/v1",headers:{authorization:"2a802ea2-27ed-4bda-9f25-4922d40c7a86","Content-Type":"application/json"}});let u,_,m,p;h.getUserInfo().then((e=>{u=new d(e),u.setUserInfo(s)})).catch((e=>console.error(e))),h.getInitialCards().then((e=>{_=new a({items:e,renderer:e=>{const t=q(e);_.addItem(t,"append")}},".pictures__list"),_.renderItems()})).catch((e=>{console.error(e)}));const v=new c("#modal-add",(function(e){I((function(){return h.addCard(e).then((e=>{const t=q(e);_.addItem(t,"prepend")})).then((()=>v.clearForm())).then((()=>L.add.disableSubmitButton()))}),v)})),E=new c("#modal-edit",(function(e){I((function(){return h.editUserInfo(e).then((()=>u.changeUserInfo(e))).then((()=>u.setUserInfo(s)))}),E)})),b=new class extends l{constructor(e,t){super(e),this._popupForm=this._popupElement.querySelector(".modal__form"),this._callbackFunction=t}setEventListeners(){super.setEventListeners(),this._popupForm.addEventListener("submit",(()=>{this._callbackFunction()}))}}("#modal-delete",(function(){h.deleteCard(m).then((()=>p.remove())).then((()=>b.close())).catch((e=>console.error(e)))})),f=new c("#modal-avatar",(function(e){I((function(){return h.changeProfilePicture(e).then((()=>u.changeAvatar(e.avatar))).then((()=>u.setUserInfo(s))).then((()=>f.clearForm())).then((()=>L.avatar.disableSubmitButton()))}),f)})),k=new class extends l{constructor(e){super(e),this._popupImage=this._popupElement.querySelector(".modal__image"),this._popupCaption=this._popupElement.querySelector(".modal__text")}open(e,t){this._popupImage.src=e,this._popupImage.alt=t,this._popupCaption.textContent=t,super.open()}}("#modal-picture"),L={};function S(e,t){k.open(e,t)}function g(e,t){b.open(),m=e,p=t.target.closest(".card")}function y(e){return h.removeLikeFromCard(e)}function C(e){return h.addLikeToCard(e)}function q(e){return new n(e,"#card-template",S,g,y,C).generateCard()}function I(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Saving...";t.renderLoading(!0,s),e().then((()=>{t.close()})).catch((e=>console.error(e))).finally((()=>{t.renderLoading(!1)}))}var B;B={formSelector:".modal__form",inputSelector:".modal__input",submitButtonSelector:".modal__button",inactiveButtonClass:"modal__button_disabled",inputErrorClass:"modal__input_type_error",errorClass:"modal__error_visible"},Array.from(document.querySelectorAll(B.formSelector)).forEach((e=>{const t=new o(B,e),s=e.getAttribute("name");L[s]=t,t.enableValidation()})),e.addEventListener("click",(function(){v.open()})),t.addEventListener("click",(function(){const e=u.getUserInfo();r.name.value=e.name,r.about.value=e.about,L.edit.resetValidation(),E.open()})),i.addEventListener("click",(function(){f.open()})),v.setEventListeners(),E.setEventListeners(),f.setEventListeners(),b.setEventListeners(),k.setEventListeners()}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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SSxTQUFTcUksSUFDaEIsTUFBTUMsRUFBWSxJQUFJcEosRUFBY0MsRUFBUWtKLEdBQ3RDRSxFQUFXRixFQUFZRyxhQUFhLFFBRTFDdkIsRUFBZXNCLEdBQVlELEVBQzNCQSxFQUFVdEgsa0JBQWtCLElBNkdoQ3pGLEVBQVVnRCxpQkFBaUIsU0F2RzNCLFdBQ0VzSSxFQUFheEUsTUFDZixJQXNHQTNHLEVBQVc2QyxpQkFBaUIsU0FwRzVCLFdBQ0UsTUFBTTRGLEVBQWtCb0MsRUFBU3JDLGNBQ2pDbkksRUFBZ0JILEtBQUs0SCxNQUFRVyxFQUFnQnZJLEtBQzdDRyxFQUFnQkYsTUFBTTJILE1BQVFXLEVBQWdCdEksTUFDOUNvTCxFQUFxQixLQUFFbkgsa0JBQ3ZCb0gsRUFBYzdFLE1BQ2hCLElBK0ZBckcsRUFBaUJ1QyxpQkFBaUIsU0F6RmxDLFdBQ0U4SSxFQUFnQmhGLE1BQ2xCLElBd0ZBd0UsRUFBYWpFLG9CQUNic0UsRUFBY3RFLG9CQUNkeUUsRUFBZ0J6RSxvQkFDaEJ3RSxFQUFrQnhFLG9CQUNsQjJFLEVBQVczRSxtQiIsInNvdXJjZXMiOlsid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy91dGlscy9jb25zdGFudHMuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvQ2FyZC5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1NlY3Rpb24uanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvUG9wdXAuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Vc2VySW5mby5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvcGFnZXMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL3V0aWxzL0FwaS5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Qb3B1cEZvckRlbGV0ZS5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgY29uc3QgaW5pdGlhbENhcmRzID0gW1xuICB7XG4gICAgbmFtZTogXCJZb3NlbWl0ZSBWYWxsZXlcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QveW9zZW1pdGUuanBnXCIsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIkxha2UgTG91aXNlXCIsXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L2xha2UtbG91aXNlLmpwZ1wiLFxuICB9LFxuICB7XG4gICAgbmFtZTogXCJCYWxkIE1vdW50YWluc1wiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC9iYWxkLW1vdW50YWlucy5qcGdcIixcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiTGF0ZW1hclwiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC9sYXRlbWFyLmpwZ1wiLFxuICB9LFxuICB7XG4gICAgbmFtZTogXCJWYW5vaXNlIE5hdGlvbmFsIFBhcmtcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvdmFub2lzZS5qcGdcIixcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiTGFnbyBkaSBCcmFpZXNcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvbGFnby5qcGdcIixcbiAgfSxcbl07XG5cbmV4cG9ydCBjb25zdCBjb25maWcgPSB7XG4gIGZvcm1TZWxlY3RvcjogXCIubW9kYWxfX2Zvcm1cIixcbiAgaW5wdXRTZWxlY3RvcjogXCIubW9kYWxfX2lucHV0XCIsXG4gIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiBcIi5tb2RhbF9fYnV0dG9uXCIsXG4gIGluYWN0aXZlQnV0dG9uQ2xhc3M6IFwibW9kYWxfX2J1dHRvbl9kaXNhYmxlZFwiLFxuICBpbnB1dEVycm9yQ2xhc3M6IFwibW9kYWxfX2lucHV0X3R5cGVfZXJyb3JcIixcbiAgZXJyb3JDbGFzczogXCJtb2RhbF9fZXJyb3JfdmlzaWJsZVwiLFxufTtcblxuZXhwb3J0IGNvbnN0IGFkZEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fYWRkLWJ1dHRvblwiKTtcbmV4cG9ydCBjb25zdCBlZGl0QnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19lZGl0LWJ1dHRvblwiKTtcbmV4cG9ydCBjb25zdCBwcm9maWxlSW5mbyA9IHtcbiAgbmFtZTogZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19uYW1lXCIpLFxuICBhYm91dDogZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19zdWJ0aXRsZVwiKSxcbiAgYXZhdGFyOiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2F2YXRhclwiKSxcbn07XG5leHBvcnQgY29uc3QgcHJvZmlsZUZvcm1JbmZvID0ge1xuICBuYW1lOiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19uYW1lXCIpLFxuICBhYm91dDogZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fc3VidGl0bGVcIiksXG59O1xuXG5leHBvcnQgY29uc3QgZWRpdEF2YXRhckJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gIFwiLnByb2ZpbGVfX2F2YXRhci1idXR0b25cIlxuKTtcblxuZXhwb3J0IGNvbnN0IGFkZFBvcHVwID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNtb2RhbC1hZGRcIik7XG5leHBvcnQgY29uc3QgZWRpdFBvcHVwID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNtb2RhbC1lZGl0XCIpO1xuZXhwb3J0IGNvbnN0IGF2YXRhclBvcHVwID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNtb2RhbC1hdmF0YXJcIik7XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBDYXJkIHtcbiAgY29uc3RydWN0b3IoXG4gICAgZGF0YSxcbiAgICBjYXJkU2VsZWN0b3IsXG4gICAgY2xpY2tGdW5jdGlvbixcbiAgICBkZWxldGVGdW5jdGlvbixcbiAgICByZW1vdmVMaWtlRnJvbVNlcnZlcixcbiAgICBzZW5kTGlrZVRvU2VydmVyXG4gICkge1xuICAgIHRoaXMuX25hbWUgPSBkYXRhLm5hbWU7XG4gICAgdGhpcy5fbGluayA9IGRhdGEubGluaztcbiAgICB0aGlzLmlkID0gZGF0YS5faWQ7XG4gICAgdGhpcy5faXNMaWtlZCA9IGRhdGEuaXNMaWtlZDtcbiAgICB0aGlzLl9jYXJkU2VsZWN0b3IgPSBjYXJkU2VsZWN0b3I7XG4gICAgdGhpcy5fY2xpY2tGdW5jdGlvbiA9IGNsaWNrRnVuY3Rpb247XG4gICAgdGhpcy5fZGVsZXRlRnVuY3Rpb24gPSBkZWxldGVGdW5jdGlvbjtcbiAgICB0aGlzLl9yZW1vdmVMaWtlRnJvbVNlcnZlciA9IHJlbW92ZUxpa2VGcm9tU2VydmVyO1xuICAgIHRoaXMuX3NlbmRMaWtlVG9TZXJ2ZXIgPSBzZW5kTGlrZVRvU2VydmVyO1xuICAgIHRoaXMuX2NhcmRUZW1wbGF0ZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gICAgICB0aGlzLl9jYXJkU2VsZWN0b3JcbiAgICApLmNvbnRlbnQuZmlyc3RFbGVtZW50Q2hpbGQ7XG4gIH1cblxuICBfaGFuZGxlTGlrZUNsaWNrKCkge1xuICAgIGlmICh0aGlzLmNhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fbGlrZWRfYWN0aXZlXCIpKSB7XG4gICAgICB0aGlzLl9yZW1vdmVMaWtlRnJvbVNlcnZlcih0aGlzLmlkKVxuICAgICAgICAudGhlbigoKSA9PiB0aGlzLl9saWtlQnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoXCJjYXJkX19saWtlZF9hY3RpdmVcIikpXG4gICAgICAgIC5jYXRjaCgoZXJyKSA9PiBjb25zb2xlLmVycm9yKGVycikpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9zZW5kTGlrZVRvU2VydmVyKHRoaXMuaWQpXG4gICAgICAgIC50aGVuKCgpID0+IHRoaXMuX2xpa2VCdXR0b24uY2xhc3NMaXN0LmFkZChcImNhcmRfX2xpa2VkX2FjdGl2ZVwiKSlcbiAgICAgICAgLmNhdGNoKChlcnIpID0+IGNvbnNvbGUuZXJyb3IoZXJyKSk7XG4gICAgfVxuICB9XG5cbiAgX2hhbmRsZURlbGV0ZUNsaWNrKGV2dCkge1xuICAgIHRoaXMuX2RlbGV0ZUZ1bmN0aW9uKHRoaXMuaWQsIGV2dCk7XG4gIH1cblxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgdGhpcy5fbGlrZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4gdGhpcy5faGFuZGxlTGlrZUNsaWNrKCkpO1xuICAgIHRoaXMuX2RlbGV0ZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGV2dCkgPT5cbiAgICAgIHRoaXMuX2hhbmRsZURlbGV0ZUNsaWNrKGV2dClcbiAgICApO1xuICAgIHRoaXMuY2FyZEltYWdlLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PlxuICAgICAgdGhpcy5fY2xpY2tGdW5jdGlvbih0aGlzLl9saW5rLCB0aGlzLl9uYW1lKVxuICAgICk7XG4gIH1cblxuICBnZW5lcmF0ZUNhcmQoKSB7XG4gICAgdGhpcy5jYXJkRWxlbWVudCA9IHRoaXMuX2NhcmRUZW1wbGF0ZS5jbG9uZU5vZGUodHJ1ZSk7XG4gICAgdGhpcy5jYXJkQ2FwdGlvbiA9IHRoaXMuY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19jYXB0aW9uXCIpO1xuICAgIHRoaXMuY2FyZEltYWdlID0gdGhpcy5jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2ltYWdlXCIpO1xuICAgIHRoaXMuX2xpa2VCdXR0b24gPSB0aGlzLmNhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fbGlrZVwiKTtcbiAgICB0aGlzLl9kZWxldGVCdXR0b24gPSB0aGlzLmNhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fZGVsZXRlLWJ1dHRvblwiKTtcblxuICAgIHRoaXMuY2FyZEltYWdlLnNyYyA9IHRoaXMuX2xpbms7XG4gICAgdGhpcy5jYXJkSW1hZ2UuYWx0ID0gdGhpcy5fbmFtZTtcbiAgICB0aGlzLmNhcmRJbWFnZS5pZCA9IHRoaXMuaWQ7XG4gICAgdGhpcy5jYXJkQ2FwdGlvbi50ZXh0Q29udGVudCA9IHRoaXMuX25hbWU7XG4gICAgaWYgKHRoaXMuX2lzTGlrZWQpIHtcbiAgICAgIHRoaXMuX2xpa2VCdXR0b24uY2xhc3NMaXN0LmFkZChcImNhcmRfX2xpa2VkX2FjdGl2ZVwiKTtcbiAgICB9XG5cbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xuXG4gICAgcmV0dXJuIHRoaXMuY2FyZEVsZW1lbnQ7XG4gIH1cblxuICBfYWRkTGlrZSgpIHtcbiAgICB0aGlzLl9zZW5kTGlrZVRvU2VydmVyKHRoaXMuaWQpXG4gICAgICAudGhlbigoKSA9PiB0aGlzLl9saWtlQnV0dG9uLmNsYXNzTGlzdC5hZGQoXCJjYXJkX19saWtlZF9hY3RpdmVcIikpXG4gICAgICAuY2F0Y2goKGVycikgPT4gY29uc29sZS5lcnJvcihlcnIpKTtcbiAgfVxuXG4gIF9yZW1vdmVMaWtlKCkge1xuICAgIHRoaXMuX3JlbW92ZUxpa2VGcm9tU2VydmVyKHRoaXMuaWQpXG4gICAgICAudGhlbigoKSA9PiB0aGlzLl9saWtlQnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoXCJjYXJkX19saWtlZF9hY3RpdmVcIikpXG4gICAgICAuY2F0Y2goKGVycikgPT4gY29uc29sZS5lcnJvcihlcnIpKTtcbiAgfVxufVxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgRm9ybVZhbGlkYXRvciB7XG4gIGNvbnN0cnVjdG9yKGNvbmZpZywgZm9ybVRvVmFsaWRhdGUpIHtcbiAgICB0aGlzLl9jb25maWcgPSBjb25maWc7XG4gICAgdGhpcy5fZm9ybUVsZW1lbnQgPSBmb3JtVG9WYWxpZGF0ZTtcbiAgfVxuXG4gIF9zaG93SW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpIHtcbiAgICB0aGlzLl9lcnJvck1lc3NhZ2VFbGVtZW50ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgIGAjJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYFxuICAgICk7XG5cbiAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9jb25maWcuaW5wdXRFcnJvckNsYXNzKTtcbiAgICB0aGlzLl9lcnJvck1lc3NhZ2VFbGVtZW50LnRleHRDb250ZW50ID0gaW5wdXRFbGVtZW50LnZhbGlkYXRpb25NZXNzYWdlO1xuICAgIHRoaXMuX2Vycm9yTWVzc2FnZUVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9jb25maWcuZXJyb3JDbGFzcyk7XG4gIH1cblxuICBfaGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KSB7XG4gICAgdGhpcy5fZXJyb3JNZXNzYWdlRWxlbWVudCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gICAgICBgIyR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmBcbiAgICApO1xuXG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fY29uZmlnLmlucHV0RXJyb3JDbGFzcyk7XG4gICAgdGhpcy5fZXJyb3JNZXNzYWdlRWxlbWVudC50ZXh0Q29udGVudCA9IFwiXCI7XG4gICAgdGhpcy5fZXJyb3JNZXNzYWdlRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2NvbmZpZy5lcnJvckNsYXNzKTtcbiAgfVxuXG4gIHJlc2V0VmFsaWRhdGlvbigpIHtcbiAgICB0aGlzLl9pbnB1dEVsZW1lbnRzLmZvckVhY2goKGlucHV0RWxlbWVudCkgPT5cbiAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudClcbiAgICApO1xuICAgIHRoaXMuZGlzYWJsZVN1Ym1pdEJ1dHRvbigpO1xuICB9XG5cbiAgX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsZW1lbnQpIHtcbiAgICBpZiAoIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZCkge1xuICAgICAgdGhpcy5fc2hvd0lucHV0RXJyb3IoaW5wdXRFbGVtZW50KTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KTtcbiAgICB9XG4gIH1cblxuICBfY2hlY2tGb3JtVmFsaWRpdHkgPSAoKSA9PlxuICAgIHRoaXMuX2lucHV0RWxlbWVudHMuZXZlcnkoKGlucHV0RWxlbWVudCkgPT4gaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkKTtcblxuICBkaXNhYmxlU3VibWl0QnV0dG9uKCkge1xuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5jbGFzc0xpc3QuYWRkKHRoaXMuX2NvbmZpZy5pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24uZGlzYWJsZWQgPSB0cnVlO1xuICB9XG5cbiAgZW5hYmxlU3VibWl0QnV0dG9uKCkge1xuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2NvbmZpZy5pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24uZGlzYWJsZWQgPSBmYWxzZTtcbiAgfVxuXG4gIF90b2dnbGVCdXR0b25TdGF0ZSgpIHtcbiAgICB0aGlzLl9pc0Zvcm1WYWxpZCA9IHRoaXMuX2NoZWNrRm9ybVZhbGlkaXR5KHRoaXMuX2lucHV0RWxlbWVudHMpO1xuXG4gICAgaWYgKCF0aGlzLl9pc0Zvcm1WYWxpZCkge1xuICAgICAgdGhpcy5kaXNhYmxlU3VibWl0QnV0dG9uKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuZW5hYmxlU3VibWl0QnV0dG9uKCk7XG4gICAgfVxuICB9XG5cbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHRoaXMuX2lucHV0RWxlbWVudHMgPSBbXG4gICAgICAuLi50aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuX2NvbmZpZy5pbnB1dFNlbGVjdG9yKSxcbiAgICBdO1xuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbiA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gICAgICB0aGlzLl9jb25maWcuc3VibWl0QnV0dG9uU2VsZWN0b3JcbiAgICApO1xuXG4gICAgdGhpcy5faW5wdXRFbGVtZW50cy5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcbiAgICAgIGlucHV0RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgKCkgPT4ge1xuICAgICAgICB0aGlzLl9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbGVtZW50KTtcbiAgICAgICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG5cbiAgZW5hYmxlVmFsaWRhdGlvbigpIHtcbiAgICB0aGlzLl9mb3JtRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChldnQpID0+IHtcbiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIH0pO1xuXG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgfVxufVxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2VjdGlvbiB7XG4gIGNvbnN0cnVjdG9yKHsgaXRlbXMsIHJlbmRlcmVyIH0sIGNsYXNzU2VsZWN0b3IpIHtcbiAgICB0aGlzLl9pdGVtcyA9IGl0ZW1zO1xuICAgIHRoaXMuX3JlbmRlcmVyID0gcmVuZGVyZXI7XG4gICAgdGhpcy5fZWxlbWVudENvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoY2xhc3NTZWxlY3Rvcik7XG4gIH1cblxuICByZW5kZXJJdGVtcygpIHtcbiAgICB0aGlzLl9pdGVtcy5mb3JFYWNoKChpdGVtKSA9PiB7XG4gICAgICB0aGlzLl9yZW5kZXJlcihpdGVtKTtcbiAgICB9KTtcbiAgfVxuXG4gIGFkZEl0ZW0oZWxlbWVudCwgcGxhY2VtZW50KSB7XG4gICAgaWYgKHBsYWNlbWVudCA9PT0gXCJhcHBlbmRcIikge1xuICAgICAgdGhpcy5fZWxlbWVudENvbnRhaW5lci5hcHBlbmQoZWxlbWVudCk7XG4gICAgfSBlbHNlIGlmIChwbGFjZW1lbnQgPT09IFwicHJlcGVuZFwiKSB7XG4gICAgICB0aGlzLl9lbGVtZW50Q29udGFpbmVyLnByZXBlbmQoZWxlbWVudCk7XG4gICAgfVxuICB9XG59XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHBvcHVwU2VsZWN0b3IpO1xuICAgIHRoaXMuX2Nsb3NlQnV0dG9uID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Nsb3NlXCIpO1xuICB9XG5cbiAgb3BlbigpIHtcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuY2xhc3NMaXN0LmFkZChcIm1vZGFsX29wZW5lZFwiKTtcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XG4gIH1cblxuICBjbG9zZSA9ICgpID0+IHtcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShcIm1vZGFsX29wZW5lZFwiKTtcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XG4gIH07XG5cbiAgX2hhbmRsZUVzY0Nsb3NlID0gKGV2dCkgPT4ge1xuICAgIGlmIChldnQua2V5ID09PSBcIkVzY2FwZVwiKSB7XG4gICAgICB0aGlzLmNsb3NlKCk7XG4gICAgfVxuICB9O1xuXG4gIF9oYW5kbGVDbGlja0Nsb3NlID0gKGV2dCkgPT4ge1xuICAgIGlmIChldnQudGFyZ2V0ID09PSB0aGlzLl9wb3B1cEVsZW1lbnQpIHtcbiAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICB9XG4gIH07XG5cbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgdGhpcy5fY2xvc2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHRoaXMuY2xvc2UpO1xuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGV2dCkgPT5cbiAgICAgIHRoaXMuX2hhbmRsZUNsaWNrQ2xvc2UoZXZ0KVxuICAgICk7XG4gIH1cbn1cbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhGb3JtIGV4dGVuZHMgUG9wdXAge1xuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yLCBjYWxsYmFja0Z1bmN0aW9uKSB7XG4gICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XG4gICAgdGhpcy5fcG9wdXBGb3JtID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Zvcm1cIik7XG4gICAgdGhpcy5fY2FsbGJhY2tGdW5jdGlvbiA9IGNhbGxiYWNrRnVuY3Rpb247XG4gICAgdGhpcy5fYnV0dG9uID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2J1dHRvblwiKTtcbiAgfVxuXG4gIF9nZXRJbnB1dFZhbHVlcygpIHtcbiAgICB0aGlzLl9pbnB1dFZhbHVlcyA9IEFycmF5LmZyb20oXG4gICAgICB0aGlzLl9wb3B1cEZvcm0ucXVlcnlTZWxlY3RvckFsbChcIi5tb2RhbF9faW5wdXRcIilcbiAgICApO1xuICAgIHRoaXMuX2RhdGEgPSB7fTtcbiAgICB0aGlzLl9pbnB1dFZhbHVlcy5mb3JFYWNoKChkYXRhKSA9PiB7XG4gICAgICB0aGlzLl9kYXRhW2RhdGEubmFtZV0gPSBkYXRhLnZhbHVlO1xuICAgIH0pO1xuICAgIHJldHVybiB0aGlzLl9kYXRhO1xuICB9XG5cbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoKSA9PiB7XG4gICAgICB0aGlzLl9jYWxsYmFja0Z1bmN0aW9uKHRoaXMuX2dldElucHV0VmFsdWVzKCkpO1xuICAgIH0pO1xuICB9XG5cbiAgY2xlYXJGb3JtKCkge1xuICAgIHRoaXMuX3BvcHVwRm9ybS5yZXNldCgpO1xuICB9XG5cbiAgcmVuZGVyTG9hZGluZyhpc0xvYWRpbmcsIGxvYWRpbmdUZXh0KSB7XG4gICAgaWYgKGlzTG9hZGluZykge1xuICAgICAgdGhpcy5fYnV0dG9uVGV4dCA9IHRoaXMuX2J1dHRvbi50ZXh0Q29udGVudDtcbiAgICAgIHRoaXMuX2J1dHRvbi50ZXh0Q29udGVudCA9IGxvYWRpbmdUZXh0O1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9idXR0b24udGV4dENvbnRlbnQgPSB0aGlzLl9idXR0b25UZXh0O1xuICAgIH1cbiAgfVxufVxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgVXNlckluZm8ge1xuICBjb25zdHJ1Y3Rvcih7IG5hbWUsIGFib3V0LCBhdmF0YXIgfSkge1xuICAgIHRoaXMuX25hbWUgPSBuYW1lO1xuICAgIHRoaXMuX2Fib3V0ID0gYWJvdXQ7XG4gICAgdGhpcy5fYXZhdGFyID0gYXZhdGFyO1xuICB9XG5cbiAgZ2V0VXNlckluZm8oKSB7XG4gICAgdGhpcy5wcmVzZW50VXNlckluZm8gPSB7XG4gICAgICBuYW1lOiB0aGlzLl9uYW1lLFxuICAgICAgYWJvdXQ6IHRoaXMuX2Fib3V0LFxuICAgIH07XG4gICAgcmV0dXJuIHRoaXMucHJlc2VudFVzZXJJbmZvO1xuICB9XG5cbiAgc2V0VXNlckluZm8ocHJvZmlsZUluZm8pIHtcbiAgICBwcm9maWxlSW5mby5uYW1lLnRleHRDb250ZW50ID0gdGhpcy5fbmFtZTtcbiAgICBwcm9maWxlSW5mby5hYm91dC50ZXh0Q29udGVudCA9IHRoaXMuX2Fib3V0O1xuICAgIHByb2ZpbGVJbmZvLmF2YXRhci5zcmMgPSB0aGlzLl9hdmF0YXI7XG4gICAgcHJvZmlsZUluZm8uYXZhdGFyLmFsdCA9IGAke3RoaXMuX25hbWV9LCAke3RoaXMuX2Fib3V0fWA7XG4gICAgcmV0dXJuIHByb2ZpbGVJbmZvO1xuICB9XG5cbiAgY2hhbmdlVXNlckluZm8obmV3SW5mbykge1xuICAgIHRoaXMuX25hbWUgPSBuZXdJbmZvLm5hbWU7XG4gICAgdGhpcy5fYWJvdXQgPSBuZXdJbmZvLmFib3V0O1xuICB9XG5cbiAgY2hhbmdlQXZhdGFyKG5ld0ltYWdlKSB7XG4gICAgdGhpcy5fYXZhdGFyID0gbmV3SW1hZ2U7XG4gIH1cbn1cbiIsImltcG9ydCBcIi4vaW5kZXguY3NzXCI7XG5cbmltcG9ydCB7XG4gIGNvbmZpZyxcbiAgYWRkQnV0dG9uLFxuICBlZGl0QnV0dG9uLFxuICBwcm9maWxlSW5mbyxcbiAgcHJvZmlsZUZvcm1JbmZvLFxuICBlZGl0QXZhdGFyQnV0dG9uLFxuICBhZGRQb3B1cCxcbiAgZWRpdFBvcHVwLFxuICBhdmF0YXJQb3B1cCxcbn0gZnJvbSBcIi4uL3V0aWxzL2NvbnN0YW50cy5qc1wiO1xuXG4vLyBJbXBvcnQgY2xhc3Nlc1xuaW1wb3J0IENhcmQgZnJvbSBcIi4uL2NvbXBvbmVudHMvQ2FyZC5qc1wiO1xuaW1wb3J0IEZvcm1WYWxpZGF0b3IgZnJvbSBcIi4uL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qc1wiO1xuaW1wb3J0IFNlY3Rpb24gZnJvbSBcIi4uL2NvbXBvbmVudHMvU2VjdGlvbi5qc1wiO1xuaW1wb3J0IFBvcHVwV2l0aEltYWdlIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzXCI7XG5pbXBvcnQgUG9wdXBGb3JEZWxldGUgZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBGb3JEZWxldGUuanNcIjtcbmltcG9ydCBQb3B1cFdpdGhGb3JtIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanNcIjtcbmltcG9ydCBVc2VySW5mbyBmcm9tIFwiLi4vY29tcG9uZW50cy9Vc2VySW5mby5qc1wiO1xuaW1wb3J0IEFwaSBmcm9tIFwiLi4vdXRpbHMvQXBpLmpzXCI7XG5cbmNvbnN0IGFwaSA9IG5ldyBBcGkoe1xuICBiYXNlVXJsOiBcImh0dHBzOi8vYXJvdW5kLWFwaS5lbi50cmlwbGV0ZW4tc2VydmljZXMuY29tL3YxXCIsXG4gIGhlYWRlcnM6IHtcbiAgICBhdXRob3JpemF0aW9uOiBcIjJhODAyZWEyLTI3ZWQtNGJkYS05ZjI1LTQ5MjJkNDBjN2E4NlwiLFxuICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxuICB9LFxufSk7XG5sZXQgdXNlckluZm87XG5sZXQgY2FyZFNlY3Rpb247XG5sZXQgY2FyZElkRm9yRGVsZXRpb247XG5sZXQgY2FyZFRvRGVsZXRlO1xubGV0IGJ1dHRvblRleHQ7XG5cbmFwaVxuICAuZ2V0VXNlckluZm8oKVxuICAudGhlbigocmVzKSA9PiB7XG4gICAgdXNlckluZm8gPSBuZXcgVXNlckluZm8ocmVzKTtcbiAgICB1c2VySW5mby5zZXRVc2VySW5mbyhwcm9maWxlSW5mbyk7XG4gIH0pXG4gIC5jYXRjaCgoZXJyKSA9PiBjb25zb2xlLmVycm9yKGVycikpO1xuXG5hcGlcbiAgLmdldEluaXRpYWxDYXJkcygpXG4gIC50aGVuKChjYXJkcykgPT4ge1xuICAgIGNhcmRTZWN0aW9uID0gbmV3IFNlY3Rpb24oXG4gICAgICB7XG4gICAgICAgIGl0ZW1zOiBjYXJkcyxcbiAgICAgICAgcmVuZGVyZXI6IChpdGVtKSA9PiB7XG4gICAgICAgICAgY29uc3QgY2FyZEVsZW1lbnQgPSBjcmVhdGVDYXJkKGl0ZW0pO1xuICAgICAgICAgIGNhcmRTZWN0aW9uLmFkZEl0ZW0oY2FyZEVsZW1lbnQsIFwiYXBwZW5kXCIpO1xuICAgICAgICB9LFxuICAgICAgfSxcbiAgICAgIFwiLnBpY3R1cmVzX19saXN0XCJcbiAgICApO1xuICAgIGNhcmRTZWN0aW9uLnJlbmRlckl0ZW1zKCk7XG4gIH0pXG4gIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgY29uc29sZS5lcnJvcihlcnIpO1xuICB9KTtcblxuY29uc3QgYWRkRm9ybVBvcHVwID0gbmV3IFBvcHVwV2l0aEZvcm0oXCIjbW9kYWwtYWRkXCIsIGhhbmRsZUFkZEltYWdlKTtcbmNvbnN0IGVkaXRGb3JtUG9wdXAgPSBuZXcgUG9wdXBXaXRoRm9ybShcIiNtb2RhbC1lZGl0XCIsIGhhbmRsZUVkaXRQcm9maWxlKTtcbmNvbnN0IGRlbGV0ZVZlcmlmeVBvcHVwID0gbmV3IFBvcHVwRm9yRGVsZXRlKFxuICBcIiNtb2RhbC1kZWxldGVcIixcbiAgaGFuZGxlRGVsZXRlVmVyaWZ5XG4pO1xuY29uc3QgZWRpdEF2YXRhclBvcHVwID0gbmV3IFBvcHVwV2l0aEZvcm0oXCIjbW9kYWwtYXZhdGFyXCIsIGhhbmRsZUNoYW5nZUF2YXRhcik7XG5jb25zdCBpbWFnZVBvcHVwID0gbmV3IFBvcHVwV2l0aEltYWdlKFwiI21vZGFsLXBpY3R1cmVcIik7XG5jb25zdCBmb3JtVmFsaWRhdG9ycyA9IHt9O1xuY29uc3QgZW5hYmxlVmFsaWRhdGlvbiA9IChjb25maWcpID0+IHtcbiAgY29uc3QgZm9ybUxpc3QgPSBBcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoY29uZmlnLmZvcm1TZWxlY3RvcikpO1xuICBmb3JtTGlzdC5mb3JFYWNoKChmb3JtRWxlbWVudCkgPT4ge1xuICAgIGNvbnN0IHZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKGNvbmZpZywgZm9ybUVsZW1lbnQpO1xuICAgIGNvbnN0IGZvcm1OYW1lID0gZm9ybUVsZW1lbnQuZ2V0QXR0cmlidXRlKFwibmFtZVwiKTtcblxuICAgIGZvcm1WYWxpZGF0b3JzW2Zvcm1OYW1lXSA9IHZhbGlkYXRvcjtcbiAgICB2YWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xuICB9KTtcbn07XG5cbmVuYWJsZVZhbGlkYXRpb24oY29uZmlnKTtcblxuZnVuY3Rpb24gaGFuZGxlQWRkQ2xpY2soKSB7XG4gIGFkZEZvcm1Qb3B1cC5vcGVuKCk7XG59XG5cbmZ1bmN0aW9uIGhhbmRsZUVkaXRDbGljaygpIHtcbiAgY29uc3QgcHJlc2VudFVzZXJJbmZvID0gdXNlckluZm8uZ2V0VXNlckluZm8oKTtcbiAgcHJvZmlsZUZvcm1JbmZvLm5hbWUudmFsdWUgPSBwcmVzZW50VXNlckluZm8ubmFtZTtcbiAgcHJvZmlsZUZvcm1JbmZvLmFib3V0LnZhbHVlID0gcHJlc2VudFVzZXJJbmZvLmFib3V0O1xuICBmb3JtVmFsaWRhdG9yc1tcImVkaXRcIl0ucmVzZXRWYWxpZGF0aW9uKCk7XG4gIGVkaXRGb3JtUG9wdXAub3BlbigpO1xufVxuXG5mdW5jdGlvbiBoYW5kbGVJbWFnZUNsaWNrKGNhcmRMaW5rLCBjYXJkQ2FwdGlvbikge1xuICBpbWFnZVBvcHVwLm9wZW4oY2FyZExpbmssIGNhcmRDYXB0aW9uKTtcbn1cblxuZnVuY3Rpb24gaGFuZGxlQXZhdGFyQ2xpY2soKSB7XG4gIGVkaXRBdmF0YXJQb3B1cC5vcGVuKCk7XG59XG5cbmZ1bmN0aW9uIGhhbmRsZURlbGV0ZVBvcHVwKGNhcmRJZCwgZXZ0KSB7XG4gIGRlbGV0ZVZlcmlmeVBvcHVwLm9wZW4oKTtcbiAgY2FyZElkRm9yRGVsZXRpb24gPSBjYXJkSWQ7XG4gIGNhcmRUb0RlbGV0ZSA9IGV2dC50YXJnZXQuY2xvc2VzdChcIi5jYXJkXCIpO1xufVxuXG5mdW5jdGlvbiByZW1vdmVMaWtlRnJvbVNlcnZlcihjYXJkSWQpIHtcbiAgcmV0dXJuIGFwaS5yZW1vdmVMaWtlRnJvbUNhcmQoY2FyZElkKTtcbn1cblxuZnVuY3Rpb24gc2VuZExpa2VUb1NlcnZlcihjYXJkSWQpIHtcbiAgcmV0dXJuIGFwaS5hZGRMaWtlVG9DYXJkKGNhcmRJZCk7XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZUNhcmQoaW1hZ2VJbmZvKSB7XG4gIGNvbnN0IG5ld0NhcmQgPSBuZXcgQ2FyZChcbiAgICBpbWFnZUluZm8sXG4gICAgXCIjY2FyZC10ZW1wbGF0ZVwiLFxuICAgIGhhbmRsZUltYWdlQ2xpY2ssXG4gICAgaGFuZGxlRGVsZXRlUG9wdXAsXG4gICAgcmVtb3ZlTGlrZUZyb21TZXJ2ZXIsXG4gICAgc2VuZExpa2VUb1NlcnZlclxuICApO1xuICBjb25zdCBjYXJkRWxlbWVudCA9IG5ld0NhcmQuZ2VuZXJhdGVDYXJkKCk7XG4gIHJldHVybiBjYXJkRWxlbWVudDtcbn1cblxuZnVuY3Rpb24gaGFuZGxlU3VibWl0KHJlcXVlc3QsIHBvcHVwSW5zdGFuY2UsIGxvYWRpbmdUZXh0ID0gXCJTYXZpbmcuLi5cIikge1xuICBwb3B1cEluc3RhbmNlLnJlbmRlckxvYWRpbmcodHJ1ZSwgbG9hZGluZ1RleHQpO1xuICByZXF1ZXN0KClcbiAgICAudGhlbigoKSA9PiB7XG4gICAgICBwb3B1cEluc3RhbmNlLmNsb3NlKCk7XG4gICAgfSlcbiAgICAuY2F0Y2goKGVycikgPT4gY29uc29sZS5lcnJvcihlcnIpKVxuICAgIC5maW5hbGx5KCgpID0+IHtcbiAgICAgIHBvcHVwSW5zdGFuY2UucmVuZGVyTG9hZGluZyhmYWxzZSk7XG4gICAgfSk7XG59XG5cbmZ1bmN0aW9uIGhhbmRsZUFkZEltYWdlKGltYWdlSW5mbykge1xuICBmdW5jdGlvbiBtYWtlUmVxdWVzdCgpIHtcbiAgICByZXR1cm4gYXBpXG4gICAgICAuYWRkQ2FyZChpbWFnZUluZm8pXG4gICAgICAudGhlbigocmVzKSA9PiB7XG4gICAgICAgIGNvbnN0IGFkZGVkQ2FyZEVsZW1lbnQgPSBjcmVhdGVDYXJkKHJlcyk7XG4gICAgICAgIGNhcmRTZWN0aW9uLmFkZEl0ZW0oYWRkZWRDYXJkRWxlbWVudCwgXCJwcmVwZW5kXCIpO1xuICAgICAgfSlcbiAgICAgIC50aGVuKCgpID0+IGFkZEZvcm1Qb3B1cC5jbGVhckZvcm0oKSlcbiAgICAgIC50aGVuKCgpID0+IGZvcm1WYWxpZGF0b3JzW1wiYWRkXCJdLmRpc2FibGVTdWJtaXRCdXR0b24oKSk7XG4gIH1cbiAgaGFuZGxlU3VibWl0KG1ha2VSZXF1ZXN0LCBhZGRGb3JtUG9wdXApO1xufVxuXG5mdW5jdGlvbiBoYW5kbGVFZGl0UHJvZmlsZShuZXdQcm9maWxlSW5mbykge1xuICBmdW5jdGlvbiBtYWtlUmVxdWVzdCgpIHtcbiAgICByZXR1cm4gYXBpXG4gICAgICAuZWRpdFVzZXJJbmZvKG5ld1Byb2ZpbGVJbmZvKVxuICAgICAgLnRoZW4oKCkgPT4gdXNlckluZm8uY2hhbmdlVXNlckluZm8obmV3UHJvZmlsZUluZm8pKVxuICAgICAgLnRoZW4oKCkgPT4gdXNlckluZm8uc2V0VXNlckluZm8ocHJvZmlsZUluZm8pKTtcbiAgfVxuICBoYW5kbGVTdWJtaXQobWFrZVJlcXVlc3QsIGVkaXRGb3JtUG9wdXApO1xufVxuXG5mdW5jdGlvbiBoYW5kbGVDaGFuZ2VBdmF0YXIobmV3QXZhdGFySW1hZ2UpIHtcbiAgZnVuY3Rpb24gbWFrZVJlcXVlc3QoKSB7XG4gICAgcmV0dXJuIGFwaVxuICAgICAgLmNoYW5nZVByb2ZpbGVQaWN0dXJlKG5ld0F2YXRhckltYWdlKVxuICAgICAgLnRoZW4oKCkgPT4gdXNlckluZm8uY2hhbmdlQXZhdGFyKG5ld0F2YXRhckltYWdlLmF2YXRhcikpXG4gICAgICAudGhlbigoKSA9PiB1c2VySW5mby5zZXRVc2VySW5mbyhwcm9maWxlSW5mbykpXG4gICAgICAudGhlbigoKSA9PiBlZGl0QXZhdGFyUG9wdXAuY2xlYXJGb3JtKCkpXG4gICAgICAudGhlbigoKSA9PiBmb3JtVmFsaWRhdG9yc1tcImF2YXRhclwiXS5kaXNhYmxlU3VibWl0QnV0dG9uKCkpO1xuICB9XG4gIGhhbmRsZVN1Ym1pdChtYWtlUmVxdWVzdCwgZWRpdEF2YXRhclBvcHVwKTtcbn1cblxuZnVuY3Rpb24gaGFuZGxlRGVsZXRlVmVyaWZ5KCkge1xuICBhcGlcbiAgICAuZGVsZXRlQ2FyZChjYXJkSWRGb3JEZWxldGlvbilcbiAgICAudGhlbigoKSA9PiBjYXJkVG9EZWxldGUucmVtb3ZlKCkpXG4gICAgLnRoZW4oKCkgPT4gZGVsZXRlVmVyaWZ5UG9wdXAuY2xvc2UoKSlcbiAgICAuY2F0Y2goKGVycikgPT4gY29uc29sZS5lcnJvcihlcnIpKTtcbn1cblxuYWRkQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBoYW5kbGVBZGRDbGljayk7XG5lZGl0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBoYW5kbGVFZGl0Q2xpY2spO1xuZWRpdEF2YXRhckJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgaGFuZGxlQXZhdGFyQ2xpY2spO1xuYWRkRm9ybVBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5lZGl0Rm9ybVBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5lZGl0QXZhdGFyUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbmRlbGV0ZVZlcmlmeVBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5pbWFnZVBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBBcGkge1xuICBjb25zdHJ1Y3Rvcih7IGJhc2VVcmwsIGhlYWRlcnMgfSkge1xuICAgIHRoaXMuX2Jhc2VVcmwgPSBiYXNlVXJsO1xuICAgIHRoaXMuX2hlYWRlcnMgPSBoZWFkZXJzO1xuICB9XG5cbiAgX2NoZWNrUmVzcG9uc2UocmVzKSB7XG4gICAgaWYgKHJlcy5vaykge1xuICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChgRXJyb3I6ICR7cmVzLnN0YXR1c31gKTtcbiAgICB9XG4gIH1cblxuICBfcmVxdWVzdCh1cmwsIGhlYWRlcnMpIHtcbiAgICByZXR1cm4gZmV0Y2godXJsLCBoZWFkZXJzKS50aGVuKHRoaXMuX2NoZWNrUmVzcG9uc2UpO1xuICB9XG5cbiAgZ2V0VXNlckluZm8oKSB7XG4gICAgcmV0dXJuIHRoaXMuX3JlcXVlc3QoYCR7dGhpcy5fYmFzZVVybH0vdXNlcnMvbWVgLCB7XG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgIH0pO1xuICB9XG5cbiAgZWRpdFVzZXJJbmZvKHsgbmFtZSwgYWJvdXQgfSkge1xuICAgIHJldHVybiB0aGlzLl9yZXF1ZXN0KGAke3RoaXMuX2Jhc2VVcmx9L3VzZXJzL21lYCwge1xuICAgICAgbWV0aG9kOiBcIlBBVENIXCIsXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICBuYW1lOiBuYW1lLFxuICAgICAgICBhYm91dDogYWJvdXQsXG4gICAgICB9KSxcbiAgICB9KTtcbiAgfVxuXG4gIGNoYW5nZVByb2ZpbGVQaWN0dXJlKGxpbmspIHtcbiAgICByZXR1cm4gdGhpcy5fcmVxdWVzdChgJHt0aGlzLl9iYXNlVXJsfS91c2Vycy9tZS9hdmF0YXJgLCB7XG4gICAgICBtZXRob2Q6IFwiUEFUQ0hcIixcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgIGF2YXRhcjogbGluay5hdmF0YXIsXG4gICAgICB9KSxcbiAgICB9KTtcbiAgfVxuXG4gIGdldEluaXRpYWxDYXJkcygpIHtcbiAgICByZXR1cm4gdGhpcy5fcmVxdWVzdChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkc2AsIHtcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgfSk7XG4gIH1cblxuICBhZGRDYXJkKHsgbmFtZSwgbGluayB9KSB7XG4gICAgcmV0dXJuIHRoaXMuX3JlcXVlc3QoYCR7dGhpcy5fYmFzZVVybH0vY2FyZHNgLCB7XG4gICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgbmFtZTogbmFtZSxcbiAgICAgICAgbGluazogbGluayxcbiAgICAgIH0pLFxuICAgIH0pO1xuICB9XG5cbiAgZGVsZXRlQ2FyZChjYXJkSWQpIHtcbiAgICByZXR1cm4gdGhpcy5fcmVxdWVzdChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkcy8ke2NhcmRJZH1gLCB7XG4gICAgICBtZXRob2Q6IFwiREVMRVRFXCIsXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgIH0pO1xuICB9XG5cbiAgYWRkTGlrZVRvQ2FyZChjYXJkSWQpIHtcbiAgICByZXR1cm4gdGhpcy5fcmVxdWVzdChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkcy8ke2NhcmRJZH0vbGlrZXNgLCB7XG4gICAgICBtZXRob2Q6IFwiUFVUXCIsXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgIH0pO1xuICB9XG5cbiAgcmVtb3ZlTGlrZUZyb21DYXJkKGNhcmRJZCkge1xuICAgIHJldHVybiB0aGlzLl9yZXF1ZXN0KGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzLyR7Y2FyZElkfS9saWtlc2AsIHtcbiAgICAgIG1ldGhvZDogXCJERUxFVEVcIixcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgfSk7XG4gIH1cbn1cbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cEZvckRlbGV0ZSBleHRlbmRzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3RvciwgY2FsbGJhY2tGdW5jdGlvbikge1xuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xuICAgIHRoaXMuX3BvcHVwRm9ybSA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19mb3JtXCIpO1xuICAgIHRoaXMuX2NhbGxiYWNrRnVuY3Rpb24gPSBjYWxsYmFja0Z1bmN0aW9uO1xuICB9XG5cbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgICB0aGlzLl9wb3B1cEZvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoKSA9PiB7XG4gICAgICB0aGlzLl9jYWxsYmFja0Z1bmN0aW9uKCk7XG4gICAgfSk7XG4gIH1cbn1cbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhJbWFnZSBleHRlbmRzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xuICAgIHRoaXMuX3BvcHVwSW1hZ2UgPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9faW1hZ2VcIik7XG4gICAgdGhpcy5fcG9wdXBDYXB0aW9uID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX3RleHRcIik7XG4gIH1cblxuICBvcGVuKGNhcmRMaW5rLCBjYXJkQ2FwdGlvbikge1xuICAgIHRoaXMuX3BvcHVwSW1hZ2Uuc3JjID0gY2FyZExpbms7XG4gICAgdGhpcy5fcG9wdXBJbWFnZS5hbHQgPSBjYXJkQ2FwdGlvbjtcbiAgICB0aGlzLl9wb3B1cENhcHRpb24udGV4dENvbnRlbnQgPSBjYXJkQ2FwdGlvbjtcbiAgICBzdXBlci5vcGVuKCk7XG4gIH1cbn1cbiJdLCJuYW1lcyI6WyJhZGRCdXR0b24iLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJlZGl0QnV0dG9uIiwicHJvZmlsZUluZm8iLCJuYW1lIiwiYWJvdXQiLCJhdmF0YXIiLCJwcm9maWxlRm9ybUluZm8iLCJlZGl0QXZhdGFyQnV0dG9uIiwiQ2FyZCIsImNvbnN0cnVjdG9yIiwiZGF0YSIsImNhcmRTZWxlY3RvciIsImNsaWNrRnVuY3Rpb24iLCJkZWxldGVGdW5jdGlvbiIsInJlbW92ZUxpa2VGcm9tU2VydmVyIiwic2VuZExpa2VUb1NlcnZlciIsInRoaXMiLCJfbmFtZSIsIl9saW5rIiwibGluayIsImlkIiwiX2lkIiwiX2lzTGlrZWQiLCJpc0xpa2VkIiwiX2NhcmRTZWxlY3RvciIsIl9jbGlja0Z1bmN0aW9uIiwiX2RlbGV0ZUZ1bmN0aW9uIiwiX3JlbW92ZUxpa2VGcm9tU2VydmVyIiwiX3NlbmRMaWtlVG9TZXJ2ZXIiLCJfY2FyZFRlbXBsYXRlIiwiY29udGVudCIsImZpcnN0RWxlbWVudENoaWxkIiwiX2hhbmRsZUxpa2VDbGljayIsImNhcmRFbGVtZW50IiwidGhlbiIsIl9saWtlQnV0dG9uIiwiY2xhc3NMaXN0IiwicmVtb3ZlIiwiY2F0Y2giLCJlcnIiLCJjb25zb2xlIiwiZXJyb3IiLCJhZGQiLCJfaGFuZGxlRGVsZXRlQ2xpY2siLCJldnQiLCJfc2V0RXZlbnRMaXN0ZW5lcnMiLCJhZGRFdmVudExpc3RlbmVyIiwiX2RlbGV0ZUJ1dHRvbiIsImNhcmRJbWFnZSIsImdlbmVyYXRlQ2FyZCIsImNsb25lTm9kZSIsImNhcmRDYXB0aW9uIiwic3JjIiwiYWx0IiwidGV4dENvbnRlbnQiLCJfYWRkTGlrZSIsIl9yZW1vdmVMaWtlIiwiRm9ybVZhbGlkYXRvciIsImNvbmZpZyIsImZvcm1Ub1ZhbGlkYXRlIiwiX2NvbmZpZyIsIl9mb3JtRWxlbWVudCIsIl9zaG93SW5wdXRFcnJvciIsImlucHV0RWxlbWVudCIsIl9lcnJvck1lc3NhZ2VFbGVtZW50IiwiaW5wdXRFcnJvckNsYXNzIiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJlcnJvckNsYXNzIiwiX2hpZGVJbnB1dEVycm9yIiwicmVzZXRWYWxpZGF0aW9uIiwiX2lucHV0RWxlbWVudHMiLCJmb3JFYWNoIiwiZGlzYWJsZVN1Ym1pdEJ1dHRvbiIsIl9jaGVja0lucHV0VmFsaWRpdHkiLCJ2YWxpZGl0eSIsInZhbGlkIiwiX2NoZWNrRm9ybVZhbGlkaXR5IiwiZXZlcnkiLCJfc3VibWl0QnV0dG9uIiwiaW5hY3RpdmVCdXR0b25DbGFzcyIsImRpc2FibGVkIiwiZW5hYmxlU3VibWl0QnV0dG9uIiwiX3RvZ2dsZUJ1dHRvblN0YXRlIiwiX2lzRm9ybVZhbGlkIiwicXVlcnlTZWxlY3RvckFsbCIsImlucHV0U2VsZWN0b3IiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsImVuYWJsZVZhbGlkYXRpb24iLCJwcmV2ZW50RGVmYXVsdCIsIlNlY3Rpb24iLCJfcmVmIiwiY2xhc3NTZWxlY3RvciIsIml0ZW1zIiwicmVuZGVyZXIiLCJfaXRlbXMiLCJfcmVuZGVyZXIiLCJfZWxlbWVudENvbnRhaW5lciIsInJlbmRlckl0ZW1zIiwiaXRlbSIsImFkZEl0ZW0iLCJlbGVtZW50IiwicGxhY2VtZW50IiwiYXBwZW5kIiwicHJlcGVuZCIsIlBvcHVwIiwicG9wdXBTZWxlY3RvciIsIl9wb3B1cEVsZW1lbnQiLCJfY2xvc2VCdXR0b24iLCJvcGVuIiwiX2hhbmRsZUVzY0Nsb3NlIiwiY2xvc2UiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwia2V5IiwiX2hhbmRsZUNsaWNrQ2xvc2UiLCJ0YXJnZXQiLCJzZXRFdmVudExpc3RlbmVycyIsIlBvcHVwV2l0aEZvcm0iLCJjYWxsYmFja0Z1bmN0aW9uIiwic3VwZXIiLCJfcG9wdXBGb3JtIiwiX2NhbGxiYWNrRnVuY3Rpb24iLCJfYnV0dG9uIiwiX2dldElucHV0VmFsdWVzIiwiX2lucHV0VmFsdWVzIiwiQXJyYXkiLCJmcm9tIiwiX2RhdGEiLCJ2YWx1ZSIsImNsZWFyRm9ybSIsInJlc2V0IiwicmVuZGVyTG9hZGluZyIsImlzTG9hZGluZyIsImxvYWRpbmdUZXh0IiwiX2J1dHRvblRleHQiLCJVc2VySW5mbyIsIl9hYm91dCIsIl9hdmF0YXIiLCJnZXRVc2VySW5mbyIsInByZXNlbnRVc2VySW5mbyIsInNldFVzZXJJbmZvIiwiY2hhbmdlVXNlckluZm8iLCJuZXdJbmZvIiwiY2hhbmdlQXZhdGFyIiwibmV3SW1hZ2UiLCJhcGkiLCJiYXNlVXJsIiwiaGVhZGVycyIsIl9iYXNlVXJsIiwiX2hlYWRlcnMiLCJfY2hlY2tSZXNwb25zZSIsInJlcyIsIm9rIiwianNvbiIsIlByb21pc2UiLCJyZWplY3QiLCJzdGF0dXMiLCJfcmVxdWVzdCIsInVybCIsImZldGNoIiwiZWRpdFVzZXJJbmZvIiwiX3JlZjIiLCJtZXRob2QiLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsImNoYW5nZVByb2ZpbGVQaWN0dXJlIiwiZ2V0SW5pdGlhbENhcmRzIiwiYWRkQ2FyZCIsIl9yZWYzIiwiZGVsZXRlQ2FyZCIsImNhcmRJZCIsImFkZExpa2VUb0NhcmQiLCJyZW1vdmVMaWtlRnJvbUNhcmQiLCJhdXRob3JpemF0aW9uIiwidXNlckluZm8iLCJjYXJkU2VjdGlvbiIsImNhcmRJZEZvckRlbGV0aW9uIiwiY2FyZFRvRGVsZXRlIiwiY2FyZHMiLCJjcmVhdGVDYXJkIiwiYWRkRm9ybVBvcHVwIiwiaW1hZ2VJbmZvIiwiaGFuZGxlU3VibWl0IiwiYWRkZWRDYXJkRWxlbWVudCIsImZvcm1WYWxpZGF0b3JzIiwiZWRpdEZvcm1Qb3B1cCIsIm5ld1Byb2ZpbGVJbmZvIiwiZGVsZXRlVmVyaWZ5UG9wdXAiLCJlZGl0QXZhdGFyUG9wdXAiLCJuZXdBdmF0YXJJbWFnZSIsImltYWdlUG9wdXAiLCJfcG9wdXBJbWFnZSIsIl9wb3B1cENhcHRpb24iLCJjYXJkTGluayIsImhhbmRsZUltYWdlQ2xpY2siLCJoYW5kbGVEZWxldGVQb3B1cCIsImNsb3Nlc3QiLCJyZXF1ZXN0IiwicG9wdXBJbnN0YW5jZSIsImFyZ3VtZW50cyIsImxlbmd0aCIsInVuZGVmaW5lZCIsImZpbmFsbHkiLCJmb3JtU2VsZWN0b3IiLCJmb3JtRWxlbWVudCIsInZhbGlkYXRvciIsImZvcm1OYW1lIiwiZ2V0QXR0cmlidXRlIl0sInNvdXJjZVJvb3QiOiIifQ==