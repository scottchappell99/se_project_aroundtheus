!function(){"use strict";const e={formSelector:".modal__form",inputSelector:".modal__input",submitButtonSelector:".modal__button",inactiveButtonClass:"modal__button_disabled",inputErrorClass:"modal__input_type_error",errorClass:"modal__error_visible"},t=document.querySelector(".profile__add-button"),s=document.querySelector(".profile__edit-button"),r={name:document.querySelector(".profile__name"),about:document.querySelector(".profile__subtitle"),avatar:document.querySelector(".profile__avatar")},i={name:document.querySelector(".modal__name"),about:document.querySelector(".modal__subtitle")},n=document.querySelector(".profile__avatar-button"),o=document.querySelector("#modal-add"),a=document.querySelector("#modal-edit"),l=document.querySelector("#modal-avatar");class c{constructor(e,t,s,r,i){this._name=e.name,this._link=e.link,this.id=e._id,this._isLiked=e.isLiked,this._cardSelector=t,this._clickFunction=s,this._deleteFunction=r,this._likeToServer=i,this._cardTemplate=document.querySelector(this._cardSelector).content.firstElementChild}_handleLikeClick(){this._likeButton.classList.toggle("card__liked_active"),this._likeToServer(this.id,this.cardElement)}_handleDeleteClick(e){this._deleteFunction(this.id,e)}_setEventListeners(){this._likeButton.addEventListener("click",(()=>this._handleLikeClick())),this._deleteButton.addEventListener("click",(e=>this._handleDeleteClick(e))),this.cardImage.addEventListener("click",(()=>this._clickFunction(this._link,this._name)))}generateCard(){return this.cardElement=this._cardTemplate.cloneNode(!0),this.cardCaption=this.cardElement.querySelector(".card__caption"),this.cardImage=this.cardElement.querySelector(".card__image"),this._likeButton=this.cardElement.querySelector(".card__like"),this._deleteButton=this.cardElement.querySelector(".card__delete-button"),this.cardImage.src=this._link,this.cardImage.alt=this._name,this.cardImage.id=this.id,this.cardCaption.textContent=this._name,this._isLiked&&this._likeButton.classList.add("card__liked_active"),this._setEventListeners(),this.cardElement}}class d{constructor(e,t){this._config=e,this._formElement=t}_showInputError(e){this._errorMessageElement=this._formElement.querySelector(`#${e.id}-error`),e.classList.add(this._config.inputErrorClass),this._errorMessageElement.textContent=e.validationMessage,this._errorMessageElement.classList.add(this._config.errorClass)}_hideInputError(e){this._errorMessageElement=this._formElement.querySelector(`#${e.id}-error`),e.classList.remove(this._config.inputErrorClass),this._errorMessageElement.textContent="",this._errorMessageElement.classList.remove(this._config.errorClass)}resetValidation(){this._inputElements.forEach((e=>this._hideInputError(e))),this.disableSubmitButton()}_checkInputValidity(e){e.validity.valid?this._hideInputError(e):this._showInputError(e)}_checkFormValidity=()=>this._inputElements.every((e=>e.validity.valid));disableSubmitButton(){this._submitButton.classList.add(this._config.inactiveButtonClass),this._submitButton.disabled=!0}enableSubmitButton(){this._submitButton.classList.remove(this._config.inactiveButtonClass),this._submitButton.disabled=!1}_toggleButtonState(){this._isFormValid=this._checkFormValidity(this._inputElements),this._isFormValid?this.enableSubmitButton():this.disableSubmitButton()}_setEventListeners(){this._inputElements=[...this._formElement.querySelectorAll(this._config.inputSelector)],this._submitButton=this._formElement.querySelector(this._config.submitButtonSelector),this._inputElements.forEach((e=>{e.addEventListener("input",(()=>{this._checkInputValidity(e),this._toggleButtonState()}))}))}enableValidation(){this._formElement.addEventListener("submit",(e=>{e.preventDefault()})),this._setEventListeners()}}class h{constructor(e,t){let{items:s,renderer:r}=e;this._items=s,this._renderer=r,this._elementContainer=document.querySelector(t)}renderItems(){this._items.forEach((e=>{this._renderer(e)}))}addItem(e,t){"append"===t?this._elementContainer.append(e):"prepend"===t&&this._elementContainer.prepend(e)}}class u{constructor(e){this._popupElement=document.querySelector(e),this._closeButton=this._popupElement.querySelector(".modal__close")}open(){this._popupElement.classList.add("modal_opened"),document.addEventListener("keydown",this._handleEscClose)}close=()=>{this._popupElement.classList.remove("modal_opened"),document.removeEventListener("keydown",this._handleEscClose)};_handleEscClose=e=>{"Escape"===e.key&&this.close()};_handleClickClose=e=>{e.target===this._popupElement&&this.close()};setEventListeners(){this._closeButton.addEventListener("click",this.close),this._popupElement.addEventListener("click",(e=>this._handleClickClose(e)))}}class _ extends u{constructor(e,t){super(e),this._popupForm=this._popupElement.querySelector(".modal__form"),this._callbackFunction=t}_getInputValues(){return this._inputValues=Array.from(this._popupForm.querySelectorAll(".modal__input")),this._data={},this._inputValues.forEach((e=>{this._data[e.name]=e.value})),this._data}setEventListeners(){super.setEventListeners(),this._popupElement.addEventListener("submit",(()=>{this._callbackFunction(this._getInputValues())}))}clearForm(){this._popupForm.reset()}}class m{constructor(e){let{name:t,about:s,avatar:r}=e;this._name=t,this._about=s,this._avatar=r}getUserInfo(){return this.presentUserInfo={name:this._name,about:this._about},this.presentUserInfo}setUserInfo(e){return e.name.textContent=this._name,e.about.textContent=this._about,e.avatar.src=this._avatar,e.avatar.alt=`${this._name}, ${this._about}`,e}changeUserInfo(e){this._name=e.name,this._about=e.about}changeAvatar(e){this._avatar=e}}const p=new class{constructor(e){let{baseUrl:t,headers:s}=e;this._baseUrl=t,this._headers=s}getUserInfo(){return fetch(`${this._baseUrl}/users/me`,{headers:this._headers}).then((e=>e.ok?e.json():Promise.reject(`Error: ${e.status}`)))}editUserInfo(e){let{name:t,about:s}=e;return fetch(`${this._baseUrl}/users/me`,{method:"PATCH",headers:this._headers,body:JSON.stringify({name:t,about:s})}).then((e=>e.ok?e.json():Promise.reject(`Error: ${e.status}`)))}changeProfilePicture(e){return fetch(`${this._baseUrl}/users/me/avatar`,{method:"PATCH",headers:this._headers,body:JSON.stringify({avatar:e.avatar})}).then((e=>e.ok?e.json():Promise.reject(`Error: ${e.status}`)))}getInitialCards(){return fetch(`${this._baseUrl}/cards`,{headers:this._headers}).then((e=>e.ok?e.json():Promise.reject(`Error: ${e.status}`)))}addCard(e){let{name:t,link:s}=e;return fetch(`${this._baseUrl}/cards`,{method:"POST",headers:this._headers,body:JSON.stringify({name:t,link:s})}).then((e=>e.ok?e.json():Promise.reject(`Error: ${e.status}`)))}deleteCard(e){return fetch(`${this._baseUrl}/cards/${e}`,{method:"DELETE",headers:this._headers}).then((e=>e.ok?e.json():Promise.reject(`Error: ${e.status}`)))}addLikeToCard(e){return fetch(`${this._baseUrl}/cards/${e}/likes`,{method:"PUT",headers:this._headers}).then((e=>e.ok?e.json():Promise.reject(`Error: ${e.status}`)))}removeLikeFromCard(e){return fetch(`${this._baseUrl}/cards/${e}/likes`,{method:"DELETE",headers:this._headers}).then((e=>e.ok?e.json():Promise.reject(`Error: ${e.status}`)))}getInfoFirst(){return Promise.all([this.getUserInfo(),this.getInitialCards()])}}({baseUrl:"https://around-api.en.tripleten-services.com/v1",headers:{authorization:"2a802ea2-27ed-4bda-9f25-4922d40c7a86","Content-Type":"application/json"}});let E,f;p.getInfoFirst(),p.getUserInfo().then((e=>{E=new m(e),E.setUserInfo(r)})).catch((e=>console.error(e))),p.getInitialCards().then((e=>{f=new h({items:e,renderer:e=>{const t=F(e);f.addItem(t,"append")}},".pictures__list"),f.renderItems()})).catch((e=>{console.error(e)}));const b=new _("#modal-add",(function(t){$(!0,o.querySelector(e.submitButtonSelector)),p.addCard(t).then((e=>{let t=F(e);f.addItem(t,"prepend")})).catch((e=>console.error(e))).finally((()=>{$(!1,o.querySelector(e.submitButtonSelector)),b.close(),b.clearForm(),g.add.disableSubmitButton()}))})),v=new _("#modal-edit",(function(t){$(!0,a.querySelector(e.submitButtonSelector)),E.changeUserInfo(t),p.editUserInfo(t).then((()=>E.setUserInfo(r))).catch((e=>console.error(e))).finally((()=>{$(!1,a.querySelector(e.submitButtonSelector)),v.close()}))})),S=new class extends u{constructor(e,t){super(e),this._popupForm=this._popupElement.querySelector(".modal__form"),this._callbackFunction=t}setEventListeners(){super.setEventListeners(),this._popupForm.addEventListener("submit",(()=>{this._callbackFunction()}))}}("#modal-delete",(function(){p.deleteCard(C).catch((e=>console.error(e))).finally((()=>$(!1))),L.remove(),S.close()})),k=new _("#modal-avatar",(function(t){$(!0,l.querySelector(e.submitButtonSelector)),E.changeAvatar(t.avatar),p.changeProfilePicture(t).then((e=>E.setUserInfo(r))).catch((e=>console.error(e))).finally((()=>{$(!1,l.querySelector(e.submitButtonSelector)),k.close(),k.clearForm(),g.avatar.disableSubmitButton()}))})),y=new class extends u{constructor(e){super(e),this._popupImage=this._popupElement.querySelector(".modal__image"),this._popupCaption=this._popupElement.querySelector(".modal__text")}open(e,t){this._popupImage.src=e,this._popupImage.alt=t,this._popupCaption.textContent=t,super.open()}}("#modal-picture"),g={};let C,L,I;function q(e,t){y.open(e,t)}function B(e,t){S.open(),C=e,L=t.target.closest(".card")}function U(e,t){t.querySelector(".card__liked_active")?p.addLikeToCard(e).catch((e=>console.error(e))):p.removeLikeFromCard(e).catch((e=>console.error(e)))}function F(e){return new c(e,"#card-template",q,B,U).generateCard()}function $(e,t){e?(I=t.textContent,t.textContent="Saving..."):t.textContent=I}(e=>{Array.from(document.querySelectorAll(e.formSelector)).forEach((t=>{const s=new d(e,t),r=t.getAttribute("name");g[r]=s,s.enableValidation()}))})(e),t.addEventListener("click",(function(){b.open()})),s.addEventListener("click",(function(){const e=E.getUserInfo();i.name.value=e.name,i.about.value=e.about,g.edit.resetValidation(),v.open()})),n.addEventListener("click",(function(){k.open()})),b.setEventListeners(),v.setEventListeners(),k.setEventListeners(),S.setEventListeners(),y.setEventListeners()}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LElBQ2hCLE1BQU1DLEVBQVksSUFBSTNJLEVBQWM1RCxFQUFRc00sR0FDdENFLEVBQVdGLEVBQVlHLGFBQWEsUUFFMUNyQixFQUFlb0IsR0FBWUQsRUFDM0JBLEVBQVVsSCxrQkFBa0IsR0FDNUIsRUFNSkEsQ0FBaUJyRixHQXFIakJPLEVBQVUyQyxpQkFBaUIsU0FuSDNCLFdBQ0U2SCxFQUFhckUsTUFDZixJQWtIQWhHLEVBQVd3QyxpQkFBaUIsU0FoSDVCLFdBQ0UsTUFBTWlGLEVBQWtCb0MsRUFBU3JDLGNBQ2pDbkgsRUFBZ0JILEtBQUtnSCxNQUFRTyxFQUFnQnZILEtBQzdDRyxFQUFnQkYsTUFBTStHLE1BQVFPLEVBQWdCdEgsTUFDOUN1SyxFQUFxQixLQUFFOUcsa0JBQ3ZCK0csRUFBYzNFLE1BQ2hCLElBMkdBMUYsRUFBaUJrQyxpQkFBaUIsU0FyR2xDLFdBQ0V3SSxFQUFnQmhGLE1BQ2xCLElBb0dBcUUsRUFBYTlELG9CQUNib0UsRUFBY3BFLG9CQUNkeUUsRUFBZ0J6RSxvQkFDaEJzRSxFQUFrQnRFLG9CQUNsQjJFLEVBQVczRSxtQiIsInNvdXJjZXMiOlsid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy91dGlscy9jb25zdGFudHMuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvQ2FyZC5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1NlY3Rpb24uanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvUG9wdXAuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Vc2VySW5mby5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvcGFnZXMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL3V0aWxzL0FwaS5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Qb3B1cEZvckRlbGV0ZS5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgY29uc3QgaW5pdGlhbENhcmRzID0gW1xuICB7XG4gICAgbmFtZTogXCJZb3NlbWl0ZSBWYWxsZXlcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QveW9zZW1pdGUuanBnXCIsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIkxha2UgTG91aXNlXCIsXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L2xha2UtbG91aXNlLmpwZ1wiLFxuICB9LFxuICB7XG4gICAgbmFtZTogXCJCYWxkIE1vdW50YWluc1wiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC9iYWxkLW1vdW50YWlucy5qcGdcIixcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiTGF0ZW1hclwiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC9sYXRlbWFyLmpwZ1wiLFxuICB9LFxuICB7XG4gICAgbmFtZTogXCJWYW5vaXNlIE5hdGlvbmFsIFBhcmtcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvdmFub2lzZS5qcGdcIixcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiTGFnbyBkaSBCcmFpZXNcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvbGFnby5qcGdcIixcbiAgfSxcbl07XG5cbmV4cG9ydCBjb25zdCBjb25maWcgPSB7XG4gIGZvcm1TZWxlY3RvcjogXCIubW9kYWxfX2Zvcm1cIixcbiAgaW5wdXRTZWxlY3RvcjogXCIubW9kYWxfX2lucHV0XCIsXG4gIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiBcIi5tb2RhbF9fYnV0dG9uXCIsXG4gIGluYWN0aXZlQnV0dG9uQ2xhc3M6IFwibW9kYWxfX2J1dHRvbl9kaXNhYmxlZFwiLFxuICBpbnB1dEVycm9yQ2xhc3M6IFwibW9kYWxfX2lucHV0X3R5cGVfZXJyb3JcIixcbiAgZXJyb3JDbGFzczogXCJtb2RhbF9fZXJyb3JfdmlzaWJsZVwiLFxufTtcblxuZXhwb3J0IGNvbnN0IGFkZEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fYWRkLWJ1dHRvblwiKTtcbmV4cG9ydCBjb25zdCBlZGl0QnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19lZGl0LWJ1dHRvblwiKTtcbmV4cG9ydCBjb25zdCBwcm9maWxlSW5mbyA9IHtcbiAgbmFtZTogZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19uYW1lXCIpLFxuICBhYm91dDogZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19zdWJ0aXRsZVwiKSxcbiAgYXZhdGFyOiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2F2YXRhclwiKSxcbn07XG5leHBvcnQgY29uc3QgcHJvZmlsZUZvcm1JbmZvID0ge1xuICBuYW1lOiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19uYW1lXCIpLFxuICBhYm91dDogZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fc3VidGl0bGVcIiksXG59O1xuXG5leHBvcnQgY29uc3QgZWRpdEF2YXRhckJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gIFwiLnByb2ZpbGVfX2F2YXRhci1idXR0b25cIlxuKTtcblxuZXhwb3J0IGNvbnN0IGFkZFBvcHVwID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNtb2RhbC1hZGRcIik7XG5leHBvcnQgY29uc3QgZWRpdFBvcHVwID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNtb2RhbC1lZGl0XCIpO1xuZXhwb3J0IGNvbnN0IGF2YXRhclBvcHVwID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNtb2RhbC1hdmF0YXJcIik7XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBDYXJkIHtcbiAgY29uc3RydWN0b3IoZGF0YSwgY2FyZFNlbGVjdG9yLCBjbGlja0Z1bmN0aW9uLCBkZWxldGVGdW5jdGlvbiwgbGlrZVRvU2VydmVyKSB7XG4gICAgdGhpcy5fbmFtZSA9IGRhdGEubmFtZTtcbiAgICB0aGlzLl9saW5rID0gZGF0YS5saW5rO1xuICAgIHRoaXMuaWQgPSBkYXRhLl9pZDtcbiAgICB0aGlzLl9pc0xpa2VkID0gZGF0YS5pc0xpa2VkO1xuICAgIHRoaXMuX2NhcmRTZWxlY3RvciA9IGNhcmRTZWxlY3RvcjtcbiAgICB0aGlzLl9jbGlja0Z1bmN0aW9uID0gY2xpY2tGdW5jdGlvbjtcbiAgICB0aGlzLl9kZWxldGVGdW5jdGlvbiA9IGRlbGV0ZUZ1bmN0aW9uO1xuICAgIHRoaXMuX2xpa2VUb1NlcnZlciA9IGxpa2VUb1NlcnZlcjtcbiAgICB0aGlzLl9jYXJkVGVtcGxhdGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxuICAgICAgdGhpcy5fY2FyZFNlbGVjdG9yXG4gICAgKS5jb250ZW50LmZpcnN0RWxlbWVudENoaWxkO1xuICB9XG5cbiAgX2hhbmRsZUxpa2VDbGljaygpIHtcbiAgICB0aGlzLl9saWtlQnV0dG9uLmNsYXNzTGlzdC50b2dnbGUoXCJjYXJkX19saWtlZF9hY3RpdmVcIik7XG4gICAgdGhpcy5fbGlrZVRvU2VydmVyKHRoaXMuaWQsIHRoaXMuY2FyZEVsZW1lbnQpO1xuICB9XG5cbiAgX2hhbmRsZURlbGV0ZUNsaWNrKGV2dCkge1xuICAgIHRoaXMuX2RlbGV0ZUZ1bmN0aW9uKHRoaXMuaWQsIGV2dCk7XG4gIH1cblxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgdGhpcy5fbGlrZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4gdGhpcy5faGFuZGxlTGlrZUNsaWNrKCkpO1xuICAgIHRoaXMuX2RlbGV0ZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGV2dCkgPT5cbiAgICAgIHRoaXMuX2hhbmRsZURlbGV0ZUNsaWNrKGV2dClcbiAgICApO1xuICAgIHRoaXMuY2FyZEltYWdlLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PlxuICAgICAgdGhpcy5fY2xpY2tGdW5jdGlvbih0aGlzLl9saW5rLCB0aGlzLl9uYW1lKVxuICAgICk7XG4gIH1cblxuICBnZW5lcmF0ZUNhcmQoKSB7XG4gICAgdGhpcy5jYXJkRWxlbWVudCA9IHRoaXMuX2NhcmRUZW1wbGF0ZS5jbG9uZU5vZGUodHJ1ZSk7XG4gICAgdGhpcy5jYXJkQ2FwdGlvbiA9IHRoaXMuY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19jYXB0aW9uXCIpO1xuICAgIHRoaXMuY2FyZEltYWdlID0gdGhpcy5jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2ltYWdlXCIpO1xuICAgIHRoaXMuX2xpa2VCdXR0b24gPSB0aGlzLmNhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fbGlrZVwiKTtcbiAgICB0aGlzLl9kZWxldGVCdXR0b24gPSB0aGlzLmNhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fZGVsZXRlLWJ1dHRvblwiKTtcblxuICAgIHRoaXMuY2FyZEltYWdlLnNyYyA9IHRoaXMuX2xpbms7XG4gICAgdGhpcy5jYXJkSW1hZ2UuYWx0ID0gdGhpcy5fbmFtZTtcbiAgICB0aGlzLmNhcmRJbWFnZS5pZCA9IHRoaXMuaWQ7XG4gICAgdGhpcy5jYXJkQ2FwdGlvbi50ZXh0Q29udGVudCA9IHRoaXMuX25hbWU7XG4gICAgaWYgKHRoaXMuX2lzTGlrZWQpIHtcbiAgICAgIHRoaXMuX2xpa2VCdXR0b24uY2xhc3NMaXN0LmFkZChcImNhcmRfX2xpa2VkX2FjdGl2ZVwiKTtcbiAgICB9XG5cbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xuXG4gICAgcmV0dXJuIHRoaXMuY2FyZEVsZW1lbnQ7XG4gIH1cbn1cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIEZvcm1WYWxpZGF0b3Ige1xuICBjb25zdHJ1Y3Rvcihjb25maWcsIGZvcm1Ub1ZhbGlkYXRlKSB7XG4gICAgdGhpcy5fY29uZmlnID0gY29uZmlnO1xuICAgIHRoaXMuX2Zvcm1FbGVtZW50ID0gZm9ybVRvVmFsaWRhdGU7XG4gIH1cblxuICBfc2hvd0lucHV0RXJyb3IoaW5wdXRFbGVtZW50KSB7XG4gICAgdGhpcy5fZXJyb3JNZXNzYWdlRWxlbWVudCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gICAgICBgIyR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmBcbiAgICApO1xuXG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fY29uZmlnLmlucHV0RXJyb3JDbGFzcyk7XG4gICAgdGhpcy5fZXJyb3JNZXNzYWdlRWxlbWVudC50ZXh0Q29udGVudCA9IGlucHV0RWxlbWVudC52YWxpZGF0aW9uTWVzc2FnZTtcbiAgICB0aGlzLl9lcnJvck1lc3NhZ2VFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fY29uZmlnLmVycm9yQ2xhc3MpO1xuICB9XG5cbiAgX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCkge1xuICAgIHRoaXMuX2Vycm9yTWVzc2FnZUVsZW1lbnQgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxuICAgICAgYCMke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgXG4gICAgKTtcblxuICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2NvbmZpZy5pbnB1dEVycm9yQ2xhc3MpO1xuICAgIHRoaXMuX2Vycm9yTWVzc2FnZUVsZW1lbnQudGV4dENvbnRlbnQgPSBcIlwiO1xuICAgIHRoaXMuX2Vycm9yTWVzc2FnZUVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9jb25maWcuZXJyb3JDbGFzcyk7XG4gIH1cblxuICByZXNldFZhbGlkYXRpb24oKSB7XG4gICAgdGhpcy5faW5wdXRFbGVtZW50cy5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+XG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpXG4gICAgKTtcbiAgICB0aGlzLmRpc2FibGVTdWJtaXRCdXR0b24oKTtcbiAgfVxuXG4gIF9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbGVtZW50KSB7XG4gICAgaWYgKCFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQpIHtcbiAgICAgIHRoaXMuX3Nob3dJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XG4gICAgfVxuICB9XG5cbiAgX2NoZWNrRm9ybVZhbGlkaXR5ID0gKCkgPT5cbiAgICB0aGlzLl9pbnB1dEVsZW1lbnRzLmV2ZXJ5KChpbnB1dEVsZW1lbnQpID0+IGlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZCk7XG5cbiAgZGlzYWJsZVN1Ym1pdEJ1dHRvbigpIHtcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24uY2xhc3NMaXN0LmFkZCh0aGlzLl9jb25maWcuaW5hY3RpdmVCdXR0b25DbGFzcyk7XG4gICAgdGhpcy5fc3VibWl0QnV0dG9uLmRpc2FibGVkID0gdHJ1ZTtcbiAgfVxuXG4gIGVuYWJsZVN1Ym1pdEJ1dHRvbigpIHtcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24uY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9jb25maWcuaW5hY3RpdmVCdXR0b25DbGFzcyk7XG4gICAgdGhpcy5fc3VibWl0QnV0dG9uLmRpc2FibGVkID0gZmFsc2U7XG4gIH1cblxuICBfdG9nZ2xlQnV0dG9uU3RhdGUoKSB7XG4gICAgdGhpcy5faXNGb3JtVmFsaWQgPSB0aGlzLl9jaGVja0Zvcm1WYWxpZGl0eSh0aGlzLl9pbnB1dEVsZW1lbnRzKTtcblxuICAgIGlmICghdGhpcy5faXNGb3JtVmFsaWQpIHtcbiAgICAgIHRoaXMuZGlzYWJsZVN1Ym1pdEJ1dHRvbigpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmVuYWJsZVN1Ym1pdEJ1dHRvbigpO1xuICAgIH1cbiAgfVxuXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcbiAgICB0aGlzLl9pbnB1dEVsZW1lbnRzID0gW1xuICAgICAgLi4udGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCh0aGlzLl9jb25maWcuaW5wdXRTZWxlY3RvciksXG4gICAgXTtcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24gPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxuICAgICAgdGhpcy5fY29uZmlnLnN1Ym1pdEJ1dHRvblNlbGVjdG9yXG4gICAgKTtcblxuICAgIHRoaXMuX2lucHV0RWxlbWVudHMuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XG4gICAgICBpbnB1dEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsICgpID0+IHtcbiAgICAgICAgdGhpcy5fY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWxlbWVudCk7XG4gICAgICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIGVuYWJsZVZhbGlkYXRpb24oKSB7XG4gICAgdGhpcy5fZm9ybUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZXZ0KSA9PiB7XG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgICB9KTtcblxuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XG4gIH1cbn1cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFNlY3Rpb24ge1xuICBjb25zdHJ1Y3Rvcih7IGl0ZW1zLCByZW5kZXJlciB9LCBjbGFzc1NlbGVjdG9yKSB7XG4gICAgdGhpcy5faXRlbXMgPSBpdGVtcztcbiAgICB0aGlzLl9yZW5kZXJlciA9IHJlbmRlcmVyO1xuICAgIHRoaXMuX2VsZW1lbnRDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGNsYXNzU2VsZWN0b3IpO1xuICB9XG5cbiAgcmVuZGVySXRlbXMoKSB7XG4gICAgdGhpcy5faXRlbXMuZm9yRWFjaCgoaXRlbSkgPT4ge1xuICAgICAgdGhpcy5fcmVuZGVyZXIoaXRlbSk7XG4gICAgfSk7XG4gIH1cblxuICBhZGRJdGVtKGVsZW1lbnQsIHBsYWNlbWVudCkge1xuICAgIGlmIChwbGFjZW1lbnQgPT09IFwiYXBwZW5kXCIpIHtcbiAgICAgIHRoaXMuX2VsZW1lbnRDb250YWluZXIuYXBwZW5kKGVsZW1lbnQpO1xuICAgIH0gZWxzZSBpZiAocGxhY2VtZW50ID09PSBcInByZXBlbmRcIikge1xuICAgICAgdGhpcy5fZWxlbWVudENvbnRhaW5lci5wcmVwZW5kKGVsZW1lbnQpO1xuICAgIH1cbiAgfVxufVxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXAge1xuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XG4gICAgdGhpcy5fcG9wdXBFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwb3B1cFNlbGVjdG9yKTtcbiAgICB0aGlzLl9jbG9zZUJ1dHRvbiA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19jbG9zZVwiKTtcbiAgfVxuXG4gIG9wZW4oKSB7XG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJtb2RhbF9vcGVuZWRcIik7XG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xuICB9XG5cbiAgY2xvc2UgPSAoKSA9PiB7XG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoXCJtb2RhbF9vcGVuZWRcIik7XG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xuICB9O1xuXG4gIF9oYW5kbGVFc2NDbG9zZSA9IChldnQpID0+IHtcbiAgICBpZiAoZXZ0LmtleSA9PT0gXCJFc2NhcGVcIikge1xuICAgICAgdGhpcy5jbG9zZSgpO1xuICAgIH1cbiAgfTtcblxuICBfaGFuZGxlQ2xpY2tDbG9zZSA9IChldnQpID0+IHtcbiAgICBpZiAoZXZ0LnRhcmdldCA9PT0gdGhpcy5fcG9wdXBFbGVtZW50KSB7XG4gICAgICB0aGlzLmNsb3NlKCk7XG4gICAgfVxuICB9O1xuXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHRoaXMuX2Nsb3NlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB0aGlzLmNsb3NlKTtcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChldnQpID0+XG4gICAgICB0aGlzLl9oYW5kbGVDbGlja0Nsb3NlKGV2dClcbiAgICApO1xuICB9XG59XG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoRm9ybSBleHRlbmRzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3RvciwgY2FsbGJhY2tGdW5jdGlvbikge1xuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xuICAgIHRoaXMuX3BvcHVwRm9ybSA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19mb3JtXCIpO1xuICAgIHRoaXMuX2NhbGxiYWNrRnVuY3Rpb24gPSBjYWxsYmFja0Z1bmN0aW9uO1xuICB9XG5cbiAgX2dldElucHV0VmFsdWVzKCkge1xuICAgIHRoaXMuX2lucHV0VmFsdWVzID0gQXJyYXkuZnJvbShcbiAgICAgIHRoaXMuX3BvcHVwRm9ybS5xdWVyeVNlbGVjdG9yQWxsKFwiLm1vZGFsX19pbnB1dFwiKVxuICAgICk7XG4gICAgdGhpcy5fZGF0YSA9IHt9O1xuICAgIHRoaXMuX2lucHV0VmFsdWVzLmZvckVhY2goKGRhdGEpID0+IHtcbiAgICAgIHRoaXMuX2RhdGFbZGF0YS5uYW1lXSA9IGRhdGEudmFsdWU7XG4gICAgfSk7XG4gICAgcmV0dXJuIHRoaXMuX2RhdGE7XG4gIH1cblxuICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsICgpID0+IHtcbiAgICAgIHRoaXMuX2NhbGxiYWNrRnVuY3Rpb24odGhpcy5fZ2V0SW5wdXRWYWx1ZXMoKSk7XG4gICAgfSk7XG4gIH1cblxuICBjbGVhckZvcm0oKSB7XG4gICAgdGhpcy5fcG9wdXBGb3JtLnJlc2V0KCk7XG4gIH1cbn1cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFVzZXJJbmZvIHtcbiAgY29uc3RydWN0b3IoeyBuYW1lLCBhYm91dCwgYXZhdGFyIH0pIHtcbiAgICB0aGlzLl9uYW1lID0gbmFtZTtcbiAgICB0aGlzLl9hYm91dCA9IGFib3V0O1xuICAgIHRoaXMuX2F2YXRhciA9IGF2YXRhcjtcbiAgfVxuXG4gIGdldFVzZXJJbmZvKCkge1xuICAgIHRoaXMucHJlc2VudFVzZXJJbmZvID0ge1xuICAgICAgbmFtZTogdGhpcy5fbmFtZSxcbiAgICAgIGFib3V0OiB0aGlzLl9hYm91dCxcbiAgICB9O1xuICAgIHJldHVybiB0aGlzLnByZXNlbnRVc2VySW5mbztcbiAgfVxuXG4gIHNldFVzZXJJbmZvKHByb2ZpbGVJbmZvKSB7XG4gICAgcHJvZmlsZUluZm8ubmFtZS50ZXh0Q29udGVudCA9IHRoaXMuX25hbWU7XG4gICAgcHJvZmlsZUluZm8uYWJvdXQudGV4dENvbnRlbnQgPSB0aGlzLl9hYm91dDtcbiAgICBwcm9maWxlSW5mby5hdmF0YXIuc3JjID0gdGhpcy5fYXZhdGFyO1xuICAgIHByb2ZpbGVJbmZvLmF2YXRhci5hbHQgPSBgJHt0aGlzLl9uYW1lfSwgJHt0aGlzLl9hYm91dH1gO1xuICAgIHJldHVybiBwcm9maWxlSW5mbztcbiAgfVxuXG4gIGNoYW5nZVVzZXJJbmZvKG5ld0luZm8pIHtcbiAgICB0aGlzLl9uYW1lID0gbmV3SW5mby5uYW1lO1xuICAgIHRoaXMuX2Fib3V0ID0gbmV3SW5mby5hYm91dDtcbiAgfVxuXG4gIGNoYW5nZUF2YXRhcihuZXdJbWFnZSkge1xuICAgIHRoaXMuX2F2YXRhciA9IG5ld0ltYWdlO1xuICB9XG59XG4iLCJpbXBvcnQgXCIuL2luZGV4LmNzc1wiO1xuXG5pbXBvcnQge1xuICBjb25maWcsXG4gIGFkZEJ1dHRvbixcbiAgZWRpdEJ1dHRvbixcbiAgcHJvZmlsZUluZm8sXG4gIHByb2ZpbGVGb3JtSW5mbyxcbiAgZWRpdEF2YXRhckJ1dHRvbixcbiAgYWRkUG9wdXAsXG4gIGVkaXRQb3B1cCxcbiAgYXZhdGFyUG9wdXAsXG59IGZyb20gXCIuLi91dGlscy9jb25zdGFudHMuanNcIjtcblxuLy8gSW1wb3J0IGNsYXNzZXNcbmltcG9ydCBDYXJkIGZyb20gXCIuLi9jb21wb25lbnRzL0NhcmQuanNcIjtcbmltcG9ydCBGb3JtVmFsaWRhdG9yIGZyb20gXCIuLi9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanNcIjtcbmltcG9ydCBTZWN0aW9uIGZyb20gXCIuLi9jb21wb25lbnRzL1NlY3Rpb24uanNcIjtcbmltcG9ydCBQb3B1cFdpdGhJbWFnZSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qc1wiO1xuaW1wb3J0IFBvcHVwRm9yRGVsZXRlIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwRm9yRGVsZXRlLmpzXCI7XG5pbXBvcnQgUG9wdXBXaXRoRm9ybSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzXCI7XG5pbXBvcnQgVXNlckluZm8gZnJvbSBcIi4uL2NvbXBvbmVudHMvVXNlckluZm8uanNcIjtcbmltcG9ydCBBcGkgZnJvbSBcIi4uL3V0aWxzL0FwaS5qc1wiO1xuXG5jb25zdCBhcGkgPSBuZXcgQXBpKHtcbiAgYmFzZVVybDogXCJodHRwczovL2Fyb3VuZC1hcGkuZW4udHJpcGxldGVuLXNlcnZpY2VzLmNvbS92MVwiLFxuICBoZWFkZXJzOiB7XG4gICAgYXV0aG9yaXphdGlvbjogXCIyYTgwMmVhMi0yN2VkLTRiZGEtOWYyNS00OTIyZDQwYzdhODZcIixcbiAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcbiAgfSxcbn0pO1xubGV0IHVzZXJJbmZvO1xuYXBpLmdldEluZm9GaXJzdCgpO1xuXG5hcGlcbiAgLmdldFVzZXJJbmZvKClcbiAgLnRoZW4oKHJlcykgPT4ge1xuICAgIHVzZXJJbmZvID0gbmV3IFVzZXJJbmZvKHJlcyk7XG4gICAgdXNlckluZm8uc2V0VXNlckluZm8ocHJvZmlsZUluZm8pO1xuICB9KVxuICAuY2F0Y2goKGVycikgPT4gY29uc29sZS5lcnJvcihlcnIpKTtcblxubGV0IGNhcmRTZWN0aW9uO1xuXG5hcGlcbiAgLmdldEluaXRpYWxDYXJkcygpXG4gIC50aGVuKChjYXJkcykgPT4ge1xuICAgIGNhcmRTZWN0aW9uID0gbmV3IFNlY3Rpb24oXG4gICAgICB7XG4gICAgICAgIGl0ZW1zOiBjYXJkcyxcbiAgICAgICAgcmVuZGVyZXI6IChpdGVtKSA9PiB7XG4gICAgICAgICAgY29uc3QgY2FyZEVsZW1lbnQgPSBjcmVhdGVDYXJkKGl0ZW0pO1xuICAgICAgICAgIGNhcmRTZWN0aW9uLmFkZEl0ZW0oY2FyZEVsZW1lbnQsIFwiYXBwZW5kXCIpO1xuICAgICAgICB9LFxuICAgICAgfSxcbiAgICAgIFwiLnBpY3R1cmVzX19saXN0XCJcbiAgICApO1xuICAgIGNhcmRTZWN0aW9uLnJlbmRlckl0ZW1zKCk7XG4gIH0pXG4gIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgY29uc29sZS5lcnJvcihlcnIpO1xuICB9KTtcblxuY29uc3QgYWRkRm9ybVBvcHVwID0gbmV3IFBvcHVwV2l0aEZvcm0oXCIjbW9kYWwtYWRkXCIsIGhhbmRsZUFkZEltYWdlKTtcbmNvbnN0IGVkaXRGb3JtUG9wdXAgPSBuZXcgUG9wdXBXaXRoRm9ybShcIiNtb2RhbC1lZGl0XCIsIGhhbmRsZUVkaXRQcm9maWxlKTtcbmNvbnN0IGRlbGV0ZVZlcmlmeVBvcHVwID0gbmV3IFBvcHVwRm9yRGVsZXRlKFxuICBcIiNtb2RhbC1kZWxldGVcIixcbiAgaGFuZGxlRGVsZXRlVmVyaWZ5XG4pO1xuY29uc3QgZWRpdEF2YXRhclBvcHVwID0gbmV3IFBvcHVwV2l0aEZvcm0oXCIjbW9kYWwtYXZhdGFyXCIsIGhhbmRsZUNoYW5nZUF2YXRhcik7XG5jb25zdCBpbWFnZVBvcHVwID0gbmV3IFBvcHVwV2l0aEltYWdlKFwiI21vZGFsLXBpY3R1cmVcIik7XG5jb25zdCBmb3JtVmFsaWRhdG9ycyA9IHt9O1xuY29uc3QgZW5hYmxlVmFsaWRhdGlvbiA9IChjb25maWcpID0+IHtcbiAgY29uc3QgZm9ybUxpc3QgPSBBcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoY29uZmlnLmZvcm1TZWxlY3RvcikpO1xuICBmb3JtTGlzdC5mb3JFYWNoKChmb3JtRWxlbWVudCkgPT4ge1xuICAgIGNvbnN0IHZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKGNvbmZpZywgZm9ybUVsZW1lbnQpO1xuICAgIGNvbnN0IGZvcm1OYW1lID0gZm9ybUVsZW1lbnQuZ2V0QXR0cmlidXRlKFwibmFtZVwiKTtcblxuICAgIGZvcm1WYWxpZGF0b3JzW2Zvcm1OYW1lXSA9IHZhbGlkYXRvcjtcbiAgICB2YWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xuICB9KTtcbn07XG5sZXQgY2FyZElkRm9yRGVsZXRpb247XG5sZXQgY2FyZFRvRGVsZXRlO1xubGV0IGJ1dHRvblRleHQ7XG5cbmVuYWJsZVZhbGlkYXRpb24oY29uZmlnKTtcblxuZnVuY3Rpb24gaGFuZGxlQWRkQ2xpY2soKSB7XG4gIGFkZEZvcm1Qb3B1cC5vcGVuKCk7XG59XG5cbmZ1bmN0aW9uIGhhbmRsZUVkaXRDbGljaygpIHtcbiAgY29uc3QgcHJlc2VudFVzZXJJbmZvID0gdXNlckluZm8uZ2V0VXNlckluZm8oKTtcbiAgcHJvZmlsZUZvcm1JbmZvLm5hbWUudmFsdWUgPSBwcmVzZW50VXNlckluZm8ubmFtZTtcbiAgcHJvZmlsZUZvcm1JbmZvLmFib3V0LnZhbHVlID0gcHJlc2VudFVzZXJJbmZvLmFib3V0O1xuICBmb3JtVmFsaWRhdG9yc1tcImVkaXRcIl0ucmVzZXRWYWxpZGF0aW9uKCk7XG4gIGVkaXRGb3JtUG9wdXAub3BlbigpO1xufVxuXG5mdW5jdGlvbiBoYW5kbGVJbWFnZUNsaWNrKGNhcmRMaW5rLCBjYXJkQ2FwdGlvbikge1xuICBpbWFnZVBvcHVwLm9wZW4oY2FyZExpbmssIGNhcmRDYXB0aW9uKTtcbn1cblxuZnVuY3Rpb24gaGFuZGxlQXZhdGFyQ2xpY2soKSB7XG4gIGVkaXRBdmF0YXJQb3B1cC5vcGVuKCk7XG59XG5cbmZ1bmN0aW9uIGhhbmRsZURlbGV0ZVBvcHVwKGNhcmRJZCwgZXZ0KSB7XG4gIGRlbGV0ZVZlcmlmeVBvcHVwLm9wZW4oKTtcbiAgY2FyZElkRm9yRGVsZXRpb24gPSBjYXJkSWQ7XG4gIGNhcmRUb0RlbGV0ZSA9IGV2dC50YXJnZXQuY2xvc2VzdChcIi5jYXJkXCIpO1xufVxuXG5mdW5jdGlvbiBsaWtlVG9TZXJ2ZXIoY2FyZElkLCBjYXJkRWxlbWVudCkge1xuICBpZiAoIWNhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fbGlrZWRfYWN0aXZlXCIpKSB7XG4gICAgYXBpLnJlbW92ZUxpa2VGcm9tQ2FyZChjYXJkSWQpLmNhdGNoKChlcnIpID0+IGNvbnNvbGUuZXJyb3IoZXJyKSk7XG4gIH0gZWxzZSB7XG4gICAgYXBpLmFkZExpa2VUb0NhcmQoY2FyZElkKS5jYXRjaCgoZXJyKSA9PiBjb25zb2xlLmVycm9yKGVycikpO1xuICB9XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZUNhcmQoaW1hZ2VJbmZvKSB7XG4gIGNvbnN0IG5ld0NhcmQgPSBuZXcgQ2FyZChcbiAgICBpbWFnZUluZm8sXG4gICAgXCIjY2FyZC10ZW1wbGF0ZVwiLFxuICAgIGhhbmRsZUltYWdlQ2xpY2ssXG4gICAgaGFuZGxlRGVsZXRlUG9wdXAsXG4gICAgbGlrZVRvU2VydmVyXG4gICk7XG4gIGNvbnN0IGNhcmRFbGVtZW50ID0gbmV3Q2FyZC5nZW5lcmF0ZUNhcmQoKTtcbiAgcmV0dXJuIGNhcmRFbGVtZW50O1xufVxuXG5mdW5jdGlvbiByZW5kZXJMb2FkaW5nKGlzTG9hZGluZywgYnV0dG9uKSB7XG4gIGlmIChpc0xvYWRpbmcpIHtcbiAgICBidXR0b25UZXh0ID0gYnV0dG9uLnRleHRDb250ZW50O1xuICAgIGJ1dHRvbi50ZXh0Q29udGVudCA9IFwiU2F2aW5nLi4uXCI7XG4gIH0gZWxzZSB7XG4gICAgYnV0dG9uLnRleHRDb250ZW50ID0gYnV0dG9uVGV4dDtcbiAgfVxufVxuXG5mdW5jdGlvbiBoYW5kbGVBZGRJbWFnZShpbWFnZUluZm8pIHtcbiAgcmVuZGVyTG9hZGluZyh0cnVlLCBhZGRQb3B1cC5xdWVyeVNlbGVjdG9yKGNvbmZpZy5zdWJtaXRCdXR0b25TZWxlY3RvcikpO1xuICBhcGlcbiAgICAuYWRkQ2FyZChpbWFnZUluZm8pXG4gICAgLnRoZW4oKHJlcykgPT4ge1xuICAgICAgbGV0IGFkZGVkQ2FyZEVsZW1lbnQgPSBjcmVhdGVDYXJkKHJlcyk7XG4gICAgICBjYXJkU2VjdGlvbi5hZGRJdGVtKGFkZGVkQ2FyZEVsZW1lbnQsIFwicHJlcGVuZFwiKTtcbiAgICB9KVxuICAgIC5jYXRjaCgoZXJyKSA9PiBjb25zb2xlLmVycm9yKGVycikpXG4gICAgLmZpbmFsbHkoKCkgPT4ge1xuICAgICAgcmVuZGVyTG9hZGluZyhmYWxzZSwgYWRkUG9wdXAucXVlcnlTZWxlY3Rvcihjb25maWcuc3VibWl0QnV0dG9uU2VsZWN0b3IpKTtcbiAgICAgIGFkZEZvcm1Qb3B1cC5jbG9zZSgpO1xuICAgICAgYWRkRm9ybVBvcHVwLmNsZWFyRm9ybSgpO1xuICAgICAgZm9ybVZhbGlkYXRvcnNbXCJhZGRcIl0uZGlzYWJsZVN1Ym1pdEJ1dHRvbigpO1xuICAgIH0pO1xufVxuXG5mdW5jdGlvbiBoYW5kbGVFZGl0UHJvZmlsZShuZXdQcm9maWxlSW5mbykge1xuICByZW5kZXJMb2FkaW5nKHRydWUsIGVkaXRQb3B1cC5xdWVyeVNlbGVjdG9yKGNvbmZpZy5zdWJtaXRCdXR0b25TZWxlY3RvcikpO1xuICB1c2VySW5mby5jaGFuZ2VVc2VySW5mbyhuZXdQcm9maWxlSW5mbyk7XG4gIGFwaVxuICAgIC5lZGl0VXNlckluZm8obmV3UHJvZmlsZUluZm8pXG4gICAgLnRoZW4oKCkgPT4gdXNlckluZm8uc2V0VXNlckluZm8ocHJvZmlsZUluZm8pKVxuICAgIC5jYXRjaCgoZXJyKSA9PiBjb25zb2xlLmVycm9yKGVycikpXG4gICAgLmZpbmFsbHkoKCkgPT4ge1xuICAgICAgcmVuZGVyTG9hZGluZyhcbiAgICAgICAgZmFsc2UsXG4gICAgICAgIGVkaXRQb3B1cC5xdWVyeVNlbGVjdG9yKGNvbmZpZy5zdWJtaXRCdXR0b25TZWxlY3RvcilcbiAgICAgICk7XG4gICAgICBlZGl0Rm9ybVBvcHVwLmNsb3NlKCk7XG4gICAgfSk7XG59XG5cbmZ1bmN0aW9uIGhhbmRsZUNoYW5nZUF2YXRhcihuZXdBdmF0YXJJbWFnZSkge1xuICByZW5kZXJMb2FkaW5nKHRydWUsIGF2YXRhclBvcHVwLnF1ZXJ5U2VsZWN0b3IoY29uZmlnLnN1Ym1pdEJ1dHRvblNlbGVjdG9yKSk7XG4gIHVzZXJJbmZvLmNoYW5nZUF2YXRhcihuZXdBdmF0YXJJbWFnZS5hdmF0YXIpO1xuICBhcGlcbiAgICAuY2hhbmdlUHJvZmlsZVBpY3R1cmUobmV3QXZhdGFySW1hZ2UpXG4gICAgLnRoZW4oKHJlcykgPT4gdXNlckluZm8uc2V0VXNlckluZm8ocHJvZmlsZUluZm8pKVxuICAgIC5jYXRjaCgoZXJyKSA9PiBjb25zb2xlLmVycm9yKGVycikpXG4gICAgLmZpbmFsbHkoKCkgPT4ge1xuICAgICAgcmVuZGVyTG9hZGluZyhcbiAgICAgICAgZmFsc2UsXG4gICAgICAgIGF2YXRhclBvcHVwLnF1ZXJ5U2VsZWN0b3IoY29uZmlnLnN1Ym1pdEJ1dHRvblNlbGVjdG9yKVxuICAgICAgKTtcbiAgICAgIGVkaXRBdmF0YXJQb3B1cC5jbG9zZSgpO1xuICAgICAgZWRpdEF2YXRhclBvcHVwLmNsZWFyRm9ybSgpO1xuICAgICAgZm9ybVZhbGlkYXRvcnNbXCJhdmF0YXJcIl0uZGlzYWJsZVN1Ym1pdEJ1dHRvbigpO1xuICAgIH0pO1xufVxuXG5mdW5jdGlvbiBoYW5kbGVEZWxldGVWZXJpZnkoKSB7XG4gIGFwaVxuICAgIC5kZWxldGVDYXJkKGNhcmRJZEZvckRlbGV0aW9uKVxuICAgIC5jYXRjaCgoZXJyKSA9PiBjb25zb2xlLmVycm9yKGVycikpXG4gICAgLmZpbmFsbHkoKCkgPT4gcmVuZGVyTG9hZGluZyhmYWxzZSkpO1xuICBjYXJkVG9EZWxldGUucmVtb3ZlKCk7XG4gIGRlbGV0ZVZlcmlmeVBvcHVwLmNsb3NlKCk7XG59XG5cbmFkZEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgaGFuZGxlQWRkQ2xpY2spO1xuZWRpdEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgaGFuZGxlRWRpdENsaWNrKTtcbmVkaXRBdmF0YXJCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGhhbmRsZUF2YXRhckNsaWNrKTtcbmFkZEZvcm1Qb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xuZWRpdEZvcm1Qb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xuZWRpdEF2YXRhclBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5kZWxldGVWZXJpZnlQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xuaW1hZ2VQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgQXBpIHtcbiAgY29uc3RydWN0b3IoeyBiYXNlVXJsLCBoZWFkZXJzIH0pIHtcbiAgICB0aGlzLl9iYXNlVXJsID0gYmFzZVVybDtcbiAgICB0aGlzLl9oZWFkZXJzID0gaGVhZGVycztcbiAgfVxuXG4gIGdldFVzZXJJbmZvKCkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS91c2Vycy9tZWAsIHtcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgfSkudGhlbigocmVzKSA9PiB7XG4gICAgICBpZiAocmVzLm9rKSB7XG4gICAgICAgIHJldHVybiByZXMuanNvbigpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGBFcnJvcjogJHtyZXMuc3RhdHVzfWApO1xuICAgIH0pO1xuICB9XG5cbiAgZWRpdFVzZXJJbmZvKHsgbmFtZSwgYWJvdXQgfSkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS91c2Vycy9tZWAsIHtcbiAgICAgIG1ldGhvZDogXCJQQVRDSFwiLFxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgbmFtZTogbmFtZSxcbiAgICAgICAgYWJvdXQ6IGFib3V0LFxuICAgICAgfSksXG4gICAgfSkudGhlbigocmVzKSA9PiB7XG4gICAgICBpZiAocmVzLm9rKSB7XG4gICAgICAgIHJldHVybiByZXMuanNvbigpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGBFcnJvcjogJHtyZXMuc3RhdHVzfWApO1xuICAgIH0pO1xuICB9XG5cbiAgY2hhbmdlUHJvZmlsZVBpY3R1cmUobGluaykge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS91c2Vycy9tZS9hdmF0YXJgLCB7XG4gICAgICBtZXRob2Q6IFwiUEFUQ0hcIixcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgIGF2YXRhcjogbGluay5hdmF0YXIsXG4gICAgICB9KSxcbiAgICB9KS50aGVuKChyZXMpID0+IHtcbiAgICAgIGlmIChyZXMub2spIHtcbiAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XG4gICAgICB9XG4gICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYEVycm9yOiAke3Jlcy5zdGF0dXN9YCk7XG4gICAgfSk7XG4gIH1cblxuICBnZXRJbml0aWFsQ2FyZHMoKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzYCwge1xuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICB9KS50aGVuKChyZXMpID0+IHtcbiAgICAgIGlmIChyZXMub2spIHtcbiAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XG4gICAgICB9XG4gICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYEVycm9yOiAke3Jlcy5zdGF0dXN9YCk7XG4gICAgfSk7XG4gIH1cblxuICBhZGRDYXJkKHsgbmFtZSwgbGluayB9KSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzYCwge1xuICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgIG5hbWU6IG5hbWUsXG4gICAgICAgIGxpbms6IGxpbmssXG4gICAgICB9KSxcbiAgICB9KS50aGVuKChyZXMpID0+IHtcbiAgICAgIGlmIChyZXMub2spIHtcbiAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XG4gICAgICB9XG4gICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYEVycm9yOiAke3Jlcy5zdGF0dXN9YCk7XG4gICAgfSk7XG4gIH1cblxuICBkZWxldGVDYXJkKGNhcmRJZCkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkcy8ke2NhcmRJZH1gLCB7XG4gICAgICBtZXRob2Q6IFwiREVMRVRFXCIsXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgIH0pLnRoZW4oKHJlcykgPT4ge1xuICAgICAgaWYgKHJlcy5vaykge1xuICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChgRXJyb3I6ICR7cmVzLnN0YXR1c31gKTtcbiAgICB9KTtcbiAgfVxuXG4gIGFkZExpa2VUb0NhcmQoY2FyZElkKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzLyR7Y2FyZElkfS9saWtlc2AsIHtcbiAgICAgIG1ldGhvZDogXCJQVVRcIixcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgfSkudGhlbigocmVzKSA9PiB7XG4gICAgICBpZiAocmVzLm9rKSB7XG4gICAgICAgIHJldHVybiByZXMuanNvbigpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGBFcnJvcjogJHtyZXMuc3RhdHVzfWApO1xuICAgIH0pO1xuICB9XG5cbiAgcmVtb3ZlTGlrZUZyb21DYXJkKGNhcmRJZCkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkcy8ke2NhcmRJZH0vbGlrZXNgLCB7XG4gICAgICBtZXRob2Q6IFwiREVMRVRFXCIsXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgIH0pLnRoZW4oKHJlcykgPT4ge1xuICAgICAgaWYgKHJlcy5vaykge1xuICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChgRXJyb3I6ICR7cmVzLnN0YXR1c31gKTtcbiAgICB9KTtcbiAgfVxuXG4gIGdldEluZm9GaXJzdCgpIHtcbiAgICByZXR1cm4gUHJvbWlzZS5hbGwoW3RoaXMuZ2V0VXNlckluZm8oKSwgdGhpcy5nZXRJbml0aWFsQ2FyZHMoKV0pO1xuICB9XG59XG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBGb3JEZWxldGUgZXh0ZW5kcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IsIGNhbGxiYWNrRnVuY3Rpb24pIHtcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcbiAgICB0aGlzLl9wb3B1cEZvcm0gPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fZm9ybVwiKTtcbiAgICB0aGlzLl9jYWxsYmFja0Z1bmN0aW9uID0gY2FsbGJhY2tGdW5jdGlvbjtcbiAgfVxuXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XG4gICAgdGhpcy5fcG9wdXBGb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKCkgPT4ge1xuICAgICAgdGhpcy5fY2FsbGJhY2tGdW5jdGlvbigpO1xuICAgIH0pO1xuICB9XG59XG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoSW1hZ2UgZXh0ZW5kcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcbiAgICB0aGlzLl9wb3B1cEltYWdlID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2ltYWdlXCIpO1xuICAgIHRoaXMuX3BvcHVwQ2FwdGlvbiA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX190ZXh0XCIpO1xuICB9XG5cbiAgb3BlbihjYXJkTGluaywgY2FyZENhcHRpb24pIHtcbiAgICB0aGlzLl9wb3B1cEltYWdlLnNyYyA9IGNhcmRMaW5rO1xuICAgIHRoaXMuX3BvcHVwSW1hZ2UuYWx0ID0gY2FyZENhcHRpb247XG4gICAgdGhpcy5fcG9wdXBDYXB0aW9uLnRleHRDb250ZW50ID0gY2FyZENhcHRpb247XG4gICAgc3VwZXIub3BlbigpO1xuICB9XG59XG4iXSwibmFtZXMiOlsiY29uZmlnIiwiZm9ybVNlbGVjdG9yIiwiaW5wdXRTZWxlY3RvciIsInN1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiaW5hY3RpdmVCdXR0b25DbGFzcyIsImlucHV0RXJyb3JDbGFzcyIsImVycm9yQ2xhc3MiLCJhZGRCdXR0b24iLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJlZGl0QnV0dG9uIiwicHJvZmlsZUluZm8iLCJuYW1lIiwiYWJvdXQiLCJhdmF0YXIiLCJwcm9maWxlRm9ybUluZm8iLCJlZGl0QXZhdGFyQnV0dG9uIiwiYWRkUG9wdXAiLCJlZGl0UG9wdXAiLCJhdmF0YXJQb3B1cCIsIkNhcmQiLCJjb25zdHJ1Y3RvciIsImRhdGEiLCJjYXJkU2VsZWN0b3IiLCJjbGlja0Z1bmN0aW9uIiwiZGVsZXRlRnVuY3Rpb24iLCJsaWtlVG9TZXJ2ZXIiLCJ0aGlzIiwiX25hbWUiLCJfbGluayIsImxpbmsiLCJpZCIsIl9pZCIsIl9pc0xpa2VkIiwiaXNMaWtlZCIsIl9jYXJkU2VsZWN0b3IiLCJfY2xpY2tGdW5jdGlvbiIsIl9kZWxldGVGdW5jdGlvbiIsIl9saWtlVG9TZXJ2ZXIiLCJfY2FyZFRlbXBsYXRlIiwiY29udGVudCIsImZpcnN0RWxlbWVudENoaWxkIiwiX2hhbmRsZUxpa2VDbGljayIsIl9saWtlQnV0dG9uIiwiY2xhc3NMaXN0IiwidG9nZ2xlIiwiY2FyZEVsZW1lbnQiLCJfaGFuZGxlRGVsZXRlQ2xpY2siLCJldnQiLCJfc2V0RXZlbnRMaXN0ZW5lcnMiLCJhZGRFdmVudExpc3RlbmVyIiwiX2RlbGV0ZUJ1dHRvbiIsImNhcmRJbWFnZSIsImdlbmVyYXRlQ2FyZCIsImNsb25lTm9kZSIsImNhcmRDYXB0aW9uIiwic3JjIiwiYWx0IiwidGV4dENvbnRlbnQiLCJhZGQiLCJGb3JtVmFsaWRhdG9yIiwiZm9ybVRvVmFsaWRhdGUiLCJfY29uZmlnIiwiX2Zvcm1FbGVtZW50IiwiX3Nob3dJbnB1dEVycm9yIiwiaW5wdXRFbGVtZW50IiwiX2Vycm9yTWVzc2FnZUVsZW1lbnQiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsIl9oaWRlSW5wdXRFcnJvciIsInJlbW92ZSIsInJlc2V0VmFsaWRhdGlvbiIsIl9pbnB1dEVsZW1lbnRzIiwiZm9yRWFjaCIsImRpc2FibGVTdWJtaXRCdXR0b24iLCJfY2hlY2tJbnB1dFZhbGlkaXR5IiwidmFsaWRpdHkiLCJ2YWxpZCIsIl9jaGVja0Zvcm1WYWxpZGl0eSIsImV2ZXJ5IiwiX3N1Ym1pdEJ1dHRvbiIsImRpc2FibGVkIiwiZW5hYmxlU3VibWl0QnV0dG9uIiwiX3RvZ2dsZUJ1dHRvblN0YXRlIiwiX2lzRm9ybVZhbGlkIiwicXVlcnlTZWxlY3RvckFsbCIsImVuYWJsZVZhbGlkYXRpb24iLCJwcmV2ZW50RGVmYXVsdCIsIlNlY3Rpb24iLCJfcmVmIiwiY2xhc3NTZWxlY3RvciIsIml0ZW1zIiwicmVuZGVyZXIiLCJfaXRlbXMiLCJfcmVuZGVyZXIiLCJfZWxlbWVudENvbnRhaW5lciIsInJlbmRlckl0ZW1zIiwiaXRlbSIsImFkZEl0ZW0iLCJlbGVtZW50IiwicGxhY2VtZW50IiwiYXBwZW5kIiwicHJlcGVuZCIsIlBvcHVwIiwicG9wdXBTZWxlY3RvciIsIl9wb3B1cEVsZW1lbnQiLCJfY2xvc2VCdXR0b24iLCJvcGVuIiwiX2hhbmRsZUVzY0Nsb3NlIiwiY2xvc2UiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwia2V5IiwiX2hhbmRsZUNsaWNrQ2xvc2UiLCJ0YXJnZXQiLCJzZXRFdmVudExpc3RlbmVycyIsIlBvcHVwV2l0aEZvcm0iLCJjYWxsYmFja0Z1bmN0aW9uIiwic3VwZXIiLCJfcG9wdXBGb3JtIiwiX2NhbGxiYWNrRnVuY3Rpb24iLCJfZ2V0SW5wdXRWYWx1ZXMiLCJfaW5wdXRWYWx1ZXMiLCJBcnJheSIsImZyb20iLCJfZGF0YSIsInZhbHVlIiwiY2xlYXJGb3JtIiwicmVzZXQiLCJVc2VySW5mbyIsIl9hYm91dCIsIl9hdmF0YXIiLCJnZXRVc2VySW5mbyIsInByZXNlbnRVc2VySW5mbyIsInNldFVzZXJJbmZvIiwiY2hhbmdlVXNlckluZm8iLCJuZXdJbmZvIiwiY2hhbmdlQXZhdGFyIiwibmV3SW1hZ2UiLCJhcGkiLCJiYXNlVXJsIiwiaGVhZGVycyIsIl9iYXNlVXJsIiwiX2hlYWRlcnMiLCJmZXRjaCIsInRoZW4iLCJyZXMiLCJvayIsImpzb24iLCJQcm9taXNlIiwicmVqZWN0Iiwic3RhdHVzIiwiZWRpdFVzZXJJbmZvIiwiX3JlZjIiLCJtZXRob2QiLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsImNoYW5nZVByb2ZpbGVQaWN0dXJlIiwiZ2V0SW5pdGlhbENhcmRzIiwiYWRkQ2FyZCIsIl9yZWYzIiwiZGVsZXRlQ2FyZCIsImNhcmRJZCIsImFkZExpa2VUb0NhcmQiLCJyZW1vdmVMaWtlRnJvbUNhcmQiLCJnZXRJbmZvRmlyc3QiLCJhbGwiLCJhdXRob3JpemF0aW9uIiwidXNlckluZm8iLCJjYXJkU2VjdGlvbiIsImNhdGNoIiwiZXJyIiwiY29uc29sZSIsImVycm9yIiwiY2FyZHMiLCJjcmVhdGVDYXJkIiwiYWRkRm9ybVBvcHVwIiwiaW1hZ2VJbmZvIiwicmVuZGVyTG9hZGluZyIsImFkZGVkQ2FyZEVsZW1lbnQiLCJmaW5hbGx5IiwiZm9ybVZhbGlkYXRvcnMiLCJlZGl0Rm9ybVBvcHVwIiwibmV3UHJvZmlsZUluZm8iLCJkZWxldGVWZXJpZnlQb3B1cCIsImNhcmRJZEZvckRlbGV0aW9uIiwiY2FyZFRvRGVsZXRlIiwiZWRpdEF2YXRhclBvcHVwIiwibmV3QXZhdGFySW1hZ2UiLCJpbWFnZVBvcHVwIiwiX3BvcHVwSW1hZ2UiLCJfcG9wdXBDYXB0aW9uIiwiY2FyZExpbmsiLCJidXR0b25UZXh0IiwiaGFuZGxlSW1hZ2VDbGljayIsImhhbmRsZURlbGV0ZVBvcHVwIiwiY2xvc2VzdCIsImlzTG9hZGluZyIsImJ1dHRvbiIsImZvcm1FbGVtZW50IiwidmFsaWRhdG9yIiwiZm9ybU5hbWUiLCJnZXRBdHRyaWJ1dGUiXSwic291cmNlUm9vdCI6IiJ9