!function(){"use strict";const e=document.querySelector(".profile__add-button"),t=document.querySelector(".profile__edit-button"),s={name:document.querySelector(".profile__name"),subtitle:document.querySelector(".profile__subtitle")},n={name:document.querySelector(".modal__name"),subtitle:document.querySelector(".modal__subtitle")};class i{constructor(e,t,s){this._name=e.name,this._link=e.link,this._cardSelector=t,this._handleImageClick=s,this._cardTemplate=document.querySelector(this._cardSelector).content.firstElementChild}_handleLikeClick(){this._likeButton.classList.toggle("card__liked_active")}_handleDeleteClick(){this._cardElement.remove(),this._cardElement=null}_setEventListeners(){this._likeButton.addEventListener("click",(()=>this._handleLikeClick())),this._deleteButton.addEventListener("click",(()=>this._handleDeleteClick())),this.cardImage.addEventListener("click",(()=>this._handleImageClick(this._link,this._name)))}generateCard(){return this._cardElement=this._cardTemplate.cloneNode(!0),this.cardCaption=this._cardElement.querySelector(".card__caption"),this.cardImage=this._cardElement.querySelector(".card__image"),this._likeButton=this._cardElement.querySelector(".card__like"),this._deleteButton=this._cardElement.querySelector(".card__delete-button"),this.cardImage.src=this._link,this.cardImage.alt=this._name,this.cardCaption.textContent=this._name,this._setEventListeners(),this._cardElement}}class r{constructor(e,t){this._config=e,this._formElement=t}_showInputError(e){this._errorMessageElement=this._formElement.querySelector(`#${e.id}-error`),e.classList.add(this._config.inputErrorClass),this._errorMessageElement.textContent=e.validationMessage,this._errorMessageElement.classList.add(this._config.errorClass)}_hideInputError(e){this._errorMessageElement=this._formElement.querySelector(`#${e.id}-error`),e.classList.remove(this._config.inputErrorClass),this._errorMessageElement.textContent="",this._errorMessageElement.classList.remove(this._config.errorClass)}resetValidation(){this._inputElements.forEach((e=>this._hideInputError(e))),this.disableSubmitButton()}_checkInputValidity(e){e.validity.valid?this._hideInputError(e):this._showInputError(e)}_checkFormValidity=()=>this._inputElements.every((e=>e.validity.valid));disableSubmitButton(){this._submitButton.classList.add(this._config.inactiveButtonClass),this._submitButton.disabled=!0}enableSubmitButton(){this._submitButton.classList.remove(this._config.inactiveButtonClass),this._submitButton.disabled=!1}_toggleButtonState(){this._isFormValid=this._checkFormValidity(this._inputElements),this._isFormValid?this.enableSubmitButton():this.disableSubmitButton()}_setEventListeners(){this._inputElements=[...this._formElement.querySelectorAll(this._config.inputSelector)],this._submitButton=this._formElement.querySelector(this._config.submitButtonSelector),this._inputElements.forEach((e=>{e.addEventListener("input",(()=>{this._checkInputValidity(e),this._toggleButtonState()}))}))}enableValidation(){this._formElement.addEventListener("submit",(e=>{e.preventDefault()})),this._setEventListeners()}}class o{constructor(e){this._popupElement=document.querySelector(e),this._closeButton=this._popupElement.querySelector(".modal__close")}open(){this._popupElement.classList.add("modal_opened"),document.addEventListener("keydown",this._handleEscClose)}close=()=>{this._popupElement.classList.remove("modal_opened"),document.removeEventListener("keydown",this._handleEscClose)};_handleEscClose=e=>{"Escape"===e.key&&this.close()};_handleClickClose=e=>{e.target===this._popupElement&&this.close()};setEventListeners(){this._closeButton.addEventListener("click",this.close),this._popupElement.addEventListener("click",(e=>this._handleClickClose(e)))}}class a extends o{constructor(e,t){super(e),this._popupForm=this._popupElement.querySelector(".modal__form"),this._callbackFunction=t}_getInputValues(){return this._inputValues=Array.from(this._popupForm.querySelectorAll(".modal__input")),this._data={},this._inputValues.forEach((e=>{this._data[e.name]=e.value})),this._data}setEventListeners(){super.setEventListeners(),this._popupElement.addEventListener("submit",(()=>this._callbackFunction(this._getInputValues())))}clearForm(){this._popupForm.reset()}}const l=new class{constructor(e){let{name:t,subtitle:s}=e;this._name=t,this._subtitle=s}getUserInfo(){return this.presentUserInfo={name:this._name.textContent,subtitle:this._subtitle.textContent},this.presentUserInfo}setUserInfo(e){this._name.textContent=e.name,this._subtitle.textContent=e.subtitle}}(s),c=new a("#modal-add",(function(e){const t=p(e);d.addItem(t,"prepend"),c.close(),c.clearForm(),_.add.disableSubmitButton()})),u=new a("#modal-edit",(function(e){l.setUserInfo(e),u.close()})),m=new class extends o{constructor(e){super(e),this._popupImage=this._popupElement.querySelector(".modal__image"),this._popupCaption=this._popupElement.querySelector(".modal__text")}open(e,t){this._popupImage.src=e,this._popupImage.alt=t,this._popupCaption.textContent=t,super.open()}}("#modal-picture"),d=new class{constructor(e,t){let{items:s,renderer:n}=e;this._items=s,this._renderer=n,this._elementContainer=document.querySelector(t)}renderItems(){this._items.forEach((e=>{this._renderer(e)}))}addItem(e,t){"append"===t?this._elementContainer.append(e):"prepend"===t&&this._elementContainer.prepend(e)}}({items:[{name:"Yosemite Valley",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/yosemite.jpg"},{name:"Lake Louise",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/lake-louise.jpg"},{name:"Bald Mountains",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/bald-mountains.jpg"},{name:"Latemar",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/latemar.jpg"},{name:"Vanoise National Park",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/vanoise.jpg"},{name:"Lago di Braies",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/lago.jpg"}],renderer:e=>{const t=p(e);d.addItem(t,"append")}},".pictures__list"),_={};function h(e,t){m.open(e,t)}function p(e){return new i(e,"#card-template",h).generateCard()}var E;E={formSelector:".modal__form",inputSelector:".modal__input",submitButtonSelector:".modal__button",inactiveButtonClass:"modal__button_disabled",inputErrorClass:"modal__input_type_error",errorClass:"modal__error_visible"},Array.from(document.querySelectorAll(E.formSelector)).forEach((e=>{const t=new r(E,e),s=e.getAttribute("name");_[s]=t,t.enableValidation()})),d.renderItems(),e.addEventListener("click",(function(){c.open()})),t.addEventListener("click",(function(){const e=l.getUserInfo();n.name.value=e.name,n.subtitle.value=e.subtitle,_.edit.resetValidation(),u.open()})),c.setEventListeners(),u.setEventListeners(),m.setEventListeners()}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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RUFBZ0JsRyxLQUM3Q0UsRUFBZ0JELFNBQVMwRixNQUFRTyxFQUFnQmpHLFNBQ2pEeUcsRUFBcUIsS0FBRTFELGtCQUN2QjJELEVBQWNsQyxNQUNoQixJQTJCQTJCLEVBQWFwQixvQkFDYjJCLEVBQWMzQixvQkFDZDZCLEVBQVc3QixtQiIsInNvdXJjZXMiOlsid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy91dGlscy9jb25zdGFudHMuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvQ2FyZC5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1BvcHVwLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL3BhZ2VzL2luZGV4LmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1VzZXJJbmZvLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1NlY3Rpb24uanMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGNvbnN0IGluaXRpYWxDYXJkcyA9IFtcbiAge1xuICAgIG5hbWU6IFwiWW9zZW1pdGUgVmFsbGV5XCIsXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L3lvc2VtaXRlLmpwZ1wiLFxuICB9LFxuICB7XG4gICAgbmFtZTogXCJMYWtlIExvdWlzZVwiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC9sYWtlLWxvdWlzZS5qcGdcIixcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiQmFsZCBNb3VudGFpbnNcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvYmFsZC1tb3VudGFpbnMuanBnXCIsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIkxhdGVtYXJcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvbGF0ZW1hci5qcGdcIixcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiVmFub2lzZSBOYXRpb25hbCBQYXJrXCIsXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L3Zhbm9pc2UuanBnXCIsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIkxhZ28gZGkgQnJhaWVzXCIsXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L2xhZ28uanBnXCIsXG4gIH0sXG5dO1xuXG5leHBvcnQgY29uc3QgY29uZmlnID0ge1xuICBmb3JtU2VsZWN0b3I6IFwiLm1vZGFsX19mb3JtXCIsXG4gIGlucHV0U2VsZWN0b3I6IFwiLm1vZGFsX19pbnB1dFwiLFxuICBzdWJtaXRCdXR0b25TZWxlY3RvcjogXCIubW9kYWxfX2J1dHRvblwiLFxuICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiBcIm1vZGFsX19idXR0b25fZGlzYWJsZWRcIixcbiAgaW5wdXRFcnJvckNsYXNzOiBcIm1vZGFsX19pbnB1dF90eXBlX2Vycm9yXCIsXG4gIGVycm9yQ2xhc3M6IFwibW9kYWxfX2Vycm9yX3Zpc2libGVcIixcbn07XG5cbmV4cG9ydCBjb25zdCBhZGRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2FkZC1idXR0b25cIik7XG5leHBvcnQgY29uc3QgZWRpdEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fZWRpdC1idXR0b25cIik7XG5leHBvcnQgY29uc3QgcHJvZmlsZUluZm8gPSB7XG4gIG5hbWU6IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fbmFtZVwiKSxcbiAgc3VidGl0bGU6IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fc3VidGl0bGVcIiksXG59O1xuZXhwb3J0IGNvbnN0IHByb2ZpbGVGb3JtSW5mbyA9IHtcbiAgbmFtZTogZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fbmFtZVwiKSxcbiAgc3VidGl0bGU6IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX3N1YnRpdGxlXCIpLFxufTtcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIENhcmQge1xuICBjb25zdHJ1Y3RvcihkYXRhLCBjYXJkU2VsZWN0b3IsIGhhbmRsZUltYWdlQ2xpY2spIHtcbiAgICB0aGlzLl9uYW1lID0gZGF0YS5uYW1lO1xuICAgIHRoaXMuX2xpbmsgPSBkYXRhLmxpbms7XG4gICAgdGhpcy5fY2FyZFNlbGVjdG9yID0gY2FyZFNlbGVjdG9yO1xuICAgIHRoaXMuX2hhbmRsZUltYWdlQ2xpY2sgPSBoYW5kbGVJbWFnZUNsaWNrO1xuICAgIHRoaXMuX2NhcmRUZW1wbGF0ZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gICAgICB0aGlzLl9jYXJkU2VsZWN0b3JcbiAgICApLmNvbnRlbnQuZmlyc3RFbGVtZW50Q2hpbGQ7XG4gIH1cblxuICBfaGFuZGxlTGlrZUNsaWNrKCkge1xuICAgIHRoaXMuX2xpa2VCdXR0b24uY2xhc3NMaXN0LnRvZ2dsZShcImNhcmRfX2xpa2VkX2FjdGl2ZVwiKTtcbiAgfVxuXG4gIF9oYW5kbGVEZWxldGVDbGljaygpIHtcbiAgICB0aGlzLl9jYXJkRWxlbWVudC5yZW1vdmUoKTtcbiAgICB0aGlzLl9jYXJkRWxlbWVudCA9IG51bGw7XG4gIH1cblxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgdGhpcy5fbGlrZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4gdGhpcy5faGFuZGxlTGlrZUNsaWNrKCkpO1xuICAgIHRoaXMuX2RlbGV0ZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT5cbiAgICAgIHRoaXMuX2hhbmRsZURlbGV0ZUNsaWNrKClcbiAgICApO1xuICAgIHRoaXMuY2FyZEltYWdlLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PlxuICAgICAgdGhpcy5faGFuZGxlSW1hZ2VDbGljayh0aGlzLl9saW5rLCB0aGlzLl9uYW1lKVxuICAgICk7XG4gIH1cblxuICBnZW5lcmF0ZUNhcmQoKSB7XG4gICAgdGhpcy5fY2FyZEVsZW1lbnQgPSB0aGlzLl9jYXJkVGVtcGxhdGUuY2xvbmVOb2RlKHRydWUpO1xuICAgIHRoaXMuY2FyZENhcHRpb24gPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2NhcHRpb25cIik7XG4gICAgdGhpcy5jYXJkSW1hZ2UgPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2ltYWdlXCIpO1xuICAgIHRoaXMuX2xpa2VCdXR0b24gPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2xpa2VcIik7XG4gICAgdGhpcy5fZGVsZXRlQnV0dG9uID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgIFwiLmNhcmRfX2RlbGV0ZS1idXR0b25cIlxuICAgICk7XG5cbiAgICB0aGlzLmNhcmRJbWFnZS5zcmMgPSB0aGlzLl9saW5rO1xuICAgIHRoaXMuY2FyZEltYWdlLmFsdCA9IHRoaXMuX25hbWU7XG4gICAgdGhpcy5jYXJkQ2FwdGlvbi50ZXh0Q29udGVudCA9IHRoaXMuX25hbWU7XG5cbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xuXG4gICAgcmV0dXJuIHRoaXMuX2NhcmRFbGVtZW50O1xuICB9XG59XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBGb3JtVmFsaWRhdG9yIHtcbiAgY29uc3RydWN0b3IoY29uZmlnLCBmb3JtVG9WYWxpZGF0ZSkge1xuICAgIHRoaXMuX2NvbmZpZyA9IGNvbmZpZztcbiAgICB0aGlzLl9mb3JtRWxlbWVudCA9IGZvcm1Ub1ZhbGlkYXRlO1xuICB9XG5cbiAgX3Nob3dJbnB1dEVycm9yKGlucHV0RWxlbWVudCkge1xuICAgIHRoaXMuX2Vycm9yTWVzc2FnZUVsZW1lbnQgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxuICAgICAgYCMke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgXG4gICAgKTtcblxuICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2NvbmZpZy5pbnB1dEVycm9yQ2xhc3MpO1xuICAgIHRoaXMuX2Vycm9yTWVzc2FnZUVsZW1lbnQudGV4dENvbnRlbnQgPSBpbnB1dEVsZW1lbnQudmFsaWRhdGlvbk1lc3NhZ2U7XG4gICAgdGhpcy5fZXJyb3JNZXNzYWdlRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2NvbmZpZy5lcnJvckNsYXNzKTtcbiAgfVxuXG4gIF9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpIHtcbiAgICB0aGlzLl9lcnJvck1lc3NhZ2VFbGVtZW50ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgIGAjJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYFxuICAgICk7XG5cbiAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9jb25maWcuaW5wdXRFcnJvckNsYXNzKTtcbiAgICB0aGlzLl9lcnJvck1lc3NhZ2VFbGVtZW50LnRleHRDb250ZW50ID0gXCJcIjtcbiAgICB0aGlzLl9lcnJvck1lc3NhZ2VFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fY29uZmlnLmVycm9yQ2xhc3MpO1xuICB9XG5cbiAgcmVzZXRWYWxpZGF0aW9uKCkge1xuICAgIHRoaXMuX2lucHV0RWxlbWVudHMuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PlxuICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KVxuICAgICk7XG4gICAgdGhpcy5kaXNhYmxlU3VibWl0QnV0dG9uKCk7XG4gIH1cblxuICBfY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWxlbWVudCkge1xuICAgIGlmICghaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkKSB7XG4gICAgICB0aGlzLl9zaG93SW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xuICAgIH1cbiAgfVxuXG4gIF9jaGVja0Zvcm1WYWxpZGl0eSA9ICgpID0+XG4gICAgdGhpcy5faW5wdXRFbGVtZW50cy5ldmVyeSgoaW5wdXRFbGVtZW50KSA9PiBpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQpO1xuXG4gIGRpc2FibGVTdWJtaXRCdXR0b24oKSB7XG4gICAgdGhpcy5fc3VibWl0QnV0dG9uLmNsYXNzTGlzdC5hZGQodGhpcy5fY29uZmlnLmluYWN0aXZlQnV0dG9uQ2xhc3MpO1xuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5kaXNhYmxlZCA9IHRydWU7XG4gIH1cblxuICBlbmFibGVTdWJtaXRCdXR0b24oKSB7XG4gICAgdGhpcy5fc3VibWl0QnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fY29uZmlnLmluYWN0aXZlQnV0dG9uQ2xhc3MpO1xuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5kaXNhYmxlZCA9IGZhbHNlO1xuICB9XG5cbiAgX3RvZ2dsZUJ1dHRvblN0YXRlKCkge1xuICAgIHRoaXMuX2lzRm9ybVZhbGlkID0gdGhpcy5fY2hlY2tGb3JtVmFsaWRpdHkodGhpcy5faW5wdXRFbGVtZW50cyk7XG5cbiAgICBpZiAoIXRoaXMuX2lzRm9ybVZhbGlkKSB7XG4gICAgICB0aGlzLmRpc2FibGVTdWJtaXRCdXR0b24oKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5lbmFibGVTdWJtaXRCdXR0b24oKTtcbiAgICB9XG4gIH1cblxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgdGhpcy5faW5wdXRFbGVtZW50cyA9IFtcbiAgICAgIC4uLnRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5fY29uZmlnLmlucHV0U2VsZWN0b3IpLFxuICAgIF07XG4gICAgdGhpcy5fc3VibWl0QnV0dG9uID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgIHRoaXMuX2NvbmZpZy5zdWJtaXRCdXR0b25TZWxlY3RvclxuICAgICk7XG5cbiAgICB0aGlzLl9pbnB1dEVsZW1lbnRzLmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xuICAgICAgaW5wdXRFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCAoKSA9PiB7XG4gICAgICAgIHRoaXMuX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsZW1lbnQpO1xuICAgICAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH1cblxuICBlbmFibGVWYWxpZGF0aW9uKCkge1xuICAgIHRoaXMuX2Zvcm1FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGV2dCkgPT4ge1xuICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG4gICAgfSk7XG5cbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xuICB9XG59XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHBvcHVwU2VsZWN0b3IpO1xuICAgIHRoaXMuX2Nsb3NlQnV0dG9uID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Nsb3NlXCIpO1xuICB9XG5cbiAgb3BlbigpIHtcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuY2xhc3NMaXN0LmFkZChcIm1vZGFsX29wZW5lZFwiKTtcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XG4gIH1cblxuICBjbG9zZSA9ICgpID0+IHtcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShcIm1vZGFsX29wZW5lZFwiKTtcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XG4gIH07XG5cbiAgX2hhbmRsZUVzY0Nsb3NlID0gKGV2dCkgPT4ge1xuICAgIGlmIChldnQua2V5ID09PSBcIkVzY2FwZVwiKSB7XG4gICAgICB0aGlzLmNsb3NlKCk7XG4gICAgfVxuICB9O1xuXG4gIF9oYW5kbGVDbGlja0Nsb3NlID0gKGV2dCkgPT4ge1xuICAgIGlmIChldnQudGFyZ2V0ID09PSB0aGlzLl9wb3B1cEVsZW1lbnQpIHtcbiAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICB9XG4gIH07XG5cbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgdGhpcy5fY2xvc2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHRoaXMuY2xvc2UpO1xuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGV2dCkgPT5cbiAgICAgIHRoaXMuX2hhbmRsZUNsaWNrQ2xvc2UoZXZ0KVxuICAgICk7XG4gIH1cbn1cbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhGb3JtIGV4dGVuZHMgUG9wdXAge1xuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yLCBjYWxsYmFja0Z1bmN0aW9uKSB7XG4gICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XG4gICAgdGhpcy5fcG9wdXBGb3JtID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Zvcm1cIik7XG4gICAgdGhpcy5fY2FsbGJhY2tGdW5jdGlvbiA9IGNhbGxiYWNrRnVuY3Rpb247XG4gIH1cblxuICBfZ2V0SW5wdXRWYWx1ZXMoKSB7XG4gICAgdGhpcy5faW5wdXRWYWx1ZXMgPSBBcnJheS5mcm9tKFxuICAgICAgdGhpcy5fcG9wdXBGb3JtLnF1ZXJ5U2VsZWN0b3JBbGwoXCIubW9kYWxfX2lucHV0XCIpXG4gICAgKTtcbiAgICB0aGlzLl9kYXRhID0ge307XG4gICAgdGhpcy5faW5wdXRWYWx1ZXMuZm9yRWFjaCgoZGF0YSkgPT4ge1xuICAgICAgdGhpcy5fZGF0YVtkYXRhLm5hbWVdID0gZGF0YS52YWx1ZTtcbiAgICB9KTtcbiAgICByZXR1cm4gdGhpcy5fZGF0YTtcbiAgfVxuXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKCkgPT5cbiAgICAgIHRoaXMuX2NhbGxiYWNrRnVuY3Rpb24odGhpcy5fZ2V0SW5wdXRWYWx1ZXMoKSlcbiAgICApO1xuICB9XG5cbiAgY2xlYXJGb3JtKCkge1xuICAgIHRoaXMuX3BvcHVwRm9ybS5yZXNldCgpO1xuICB9XG59XG4iLCJpbXBvcnQgXCIuL2luZGV4LmNzc1wiO1xuXG5pbXBvcnQge1xuICBpbml0aWFsQ2FyZHMsXG4gIGNvbmZpZyxcbiAgYWRkQnV0dG9uLFxuICBlZGl0QnV0dG9uLFxuICBwcm9maWxlSW5mbyxcbiAgcHJvZmlsZUZvcm1JbmZvLFxufSBmcm9tIFwiLi4vdXRpbHMvY29uc3RhbnRzLmpzXCI7XG5cbi8vIEltcG9ydCBjbGFzc2VzXG5pbXBvcnQgQ2FyZCBmcm9tIFwiLi4vY29tcG9uZW50cy9DYXJkLmpzXCI7XG5pbXBvcnQgRm9ybVZhbGlkYXRvciBmcm9tIFwiLi4vY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzXCI7XG5pbXBvcnQgU2VjdGlvbiBmcm9tIFwiLi4vY29tcG9uZW50cy9TZWN0aW9uLmpzXCI7XG5pbXBvcnQgUG9wdXBXaXRoSW1hZ2UgZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanNcIjtcbmltcG9ydCBQb3B1cFdpdGhGb3JtIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanNcIjtcbmltcG9ydCBVc2VySW5mbyBmcm9tIFwiLi4vY29tcG9uZW50cy9Vc2VySW5mby5qc1wiO1xuXG5jb25zdCB1c2VySW5mbyA9IG5ldyBVc2VySW5mbyhwcm9maWxlSW5mbyk7XG5jb25zdCBhZGRGb3JtUG9wdXAgPSBuZXcgUG9wdXBXaXRoRm9ybShcIiNtb2RhbC1hZGRcIiwgaGFuZGxlQWRkSW1hZ2UpO1xuY29uc3QgZWRpdEZvcm1Qb3B1cCA9IG5ldyBQb3B1cFdpdGhGb3JtKFwiI21vZGFsLWVkaXRcIiwgaGFuZGxlRWRpdFByb2ZpbGUpO1xuY29uc3QgaW1hZ2VQb3B1cCA9IG5ldyBQb3B1cFdpdGhJbWFnZShcIiNtb2RhbC1waWN0dXJlXCIpO1xuY29uc3QgY2FyZFNlY3Rpb24gPSBuZXcgU2VjdGlvbihcbiAge1xuICAgIGl0ZW1zOiBpbml0aWFsQ2FyZHMsXG4gICAgcmVuZGVyZXI6IChpdGVtKSA9PiB7XG4gICAgICBjb25zdCBjYXJkRWxlbWVudCA9IGNyZWF0ZUNhcmQoaXRlbSk7XG4gICAgICBjYXJkU2VjdGlvbi5hZGRJdGVtKGNhcmRFbGVtZW50LCBcImFwcGVuZFwiKTtcbiAgICB9LFxuICB9LFxuICBcIi5waWN0dXJlc19fbGlzdFwiXG4pO1xuY29uc3QgZm9ybVZhbGlkYXRvcnMgPSB7fTtcbmNvbnN0IGVuYWJsZVZhbGlkYXRpb24gPSAoY29uZmlnKSA9PiB7XG4gIGNvbnN0IGZvcm1MaXN0ID0gQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKGNvbmZpZy5mb3JtU2VsZWN0b3IpKTtcbiAgZm9ybUxpc3QuZm9yRWFjaCgoZm9ybUVsZW1lbnQpID0+IHtcbiAgICBjb25zdCB2YWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihjb25maWcsIGZvcm1FbGVtZW50KTtcbiAgICBjb25zdCBmb3JtTmFtZSA9IGZvcm1FbGVtZW50LmdldEF0dHJpYnV0ZShcIm5hbWVcIik7XG5cbiAgICBmb3JtVmFsaWRhdG9yc1tmb3JtTmFtZV0gPSB2YWxpZGF0b3I7XG4gICAgdmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcbiAgfSk7XG59O1xuXG5lbmFibGVWYWxpZGF0aW9uKGNvbmZpZyk7XG5cbmNhcmRTZWN0aW9uLnJlbmRlckl0ZW1zKCk7XG5cbmZ1bmN0aW9uIGhhbmRsZUFkZENsaWNrKCkge1xuICBhZGRGb3JtUG9wdXAub3BlbigpO1xufVxuXG5mdW5jdGlvbiBoYW5kbGVFZGl0Q2xpY2soKSB7XG4gIGNvbnN0IHByZXNlbnRVc2VySW5mbyA9IHVzZXJJbmZvLmdldFVzZXJJbmZvKCk7XG4gIHByb2ZpbGVGb3JtSW5mby5uYW1lLnZhbHVlID0gcHJlc2VudFVzZXJJbmZvLm5hbWU7XG4gIHByb2ZpbGVGb3JtSW5mby5zdWJ0aXRsZS52YWx1ZSA9IHByZXNlbnRVc2VySW5mby5zdWJ0aXRsZTtcbiAgZm9ybVZhbGlkYXRvcnNbXCJlZGl0XCJdLnJlc2V0VmFsaWRhdGlvbigpO1xuICBlZGl0Rm9ybVBvcHVwLm9wZW4oKTtcbn1cblxuZnVuY3Rpb24gaGFuZGxlSW1hZ2VDbGljayhjYXJkTGluaywgY2FyZENhcHRpb24pIHtcbiAgaW1hZ2VQb3B1cC5vcGVuKGNhcmRMaW5rLCBjYXJkQ2FwdGlvbik7XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZUNhcmQoaW1hZ2VJbmZvKSB7XG4gIGNvbnN0IG5ld0NhcmQgPSBuZXcgQ2FyZChpbWFnZUluZm8sIFwiI2NhcmQtdGVtcGxhdGVcIiwgaGFuZGxlSW1hZ2VDbGljayk7XG4gIGNvbnN0IGNhcmRFbGVtZW50ID0gbmV3Q2FyZC5nZW5lcmF0ZUNhcmQoKTtcbiAgcmV0dXJuIGNhcmRFbGVtZW50O1xufVxuXG5mdW5jdGlvbiBoYW5kbGVBZGRJbWFnZShpbWFnZUluZm8pIHtcbiAgY29uc3QgYWRkZWRDYXJkRWxlbWVudCA9IGNyZWF0ZUNhcmQoaW1hZ2VJbmZvKTtcbiAgY2FyZFNlY3Rpb24uYWRkSXRlbShhZGRlZENhcmRFbGVtZW50LCBcInByZXBlbmRcIik7XG4gIGFkZEZvcm1Qb3B1cC5jbG9zZSgpO1xuICBhZGRGb3JtUG9wdXAuY2xlYXJGb3JtKCk7XG4gIGZvcm1WYWxpZGF0b3JzW1wiYWRkXCJdLmRpc2FibGVTdWJtaXRCdXR0b24oKTtcbn1cblxuZnVuY3Rpb24gaGFuZGxlRWRpdFByb2ZpbGUobmV3UHJvZmlsZUluZm8pIHtcbiAgdXNlckluZm8uc2V0VXNlckluZm8obmV3UHJvZmlsZUluZm8pO1xuICBlZGl0Rm9ybVBvcHVwLmNsb3NlKCk7XG59XG5cbmFkZEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgaGFuZGxlQWRkQ2xpY2spO1xuZWRpdEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgaGFuZGxlRWRpdENsaWNrKTtcbmFkZEZvcm1Qb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xuZWRpdEZvcm1Qb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xuaW1hZ2VQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgVXNlckluZm8ge1xuICBjb25zdHJ1Y3Rvcih7IG5hbWUsIHN1YnRpdGxlIH0pIHtcbiAgICB0aGlzLl9uYW1lID0gbmFtZTtcbiAgICB0aGlzLl9zdWJ0aXRsZSA9IHN1YnRpdGxlO1xuICB9XG5cbiAgZ2V0VXNlckluZm8oKSB7XG4gICAgdGhpcy5wcmVzZW50VXNlckluZm8gPSB7XG4gICAgICBuYW1lOiB0aGlzLl9uYW1lLnRleHRDb250ZW50LFxuICAgICAgc3VidGl0bGU6IHRoaXMuX3N1YnRpdGxlLnRleHRDb250ZW50LFxuICAgIH07XG4gICAgcmV0dXJuIHRoaXMucHJlc2VudFVzZXJJbmZvO1xuICB9XG5cbiAgc2V0VXNlckluZm8ocHJvZmlsZUluZm8pIHtcbiAgICB0aGlzLl9uYW1lLnRleHRDb250ZW50ID0gcHJvZmlsZUluZm8ubmFtZTtcbiAgICB0aGlzLl9zdWJ0aXRsZS50ZXh0Q29udGVudCA9IHByb2ZpbGVJbmZvLnN1YnRpdGxlO1xuICB9XG59XG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoSW1hZ2UgZXh0ZW5kcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcbiAgICB0aGlzLl9wb3B1cEltYWdlID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2ltYWdlXCIpO1xuICAgIHRoaXMuX3BvcHVwQ2FwdGlvbiA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX190ZXh0XCIpO1xuICB9XG5cbiAgb3BlbihjYXJkTGluaywgY2FyZENhcHRpb24pIHtcbiAgICB0aGlzLl9wb3B1cEltYWdlLnNyYyA9IGNhcmRMaW5rO1xuICAgIHRoaXMuX3BvcHVwSW1hZ2UuYWx0ID0gY2FyZENhcHRpb247XG4gICAgdGhpcy5fcG9wdXBDYXB0aW9uLnRleHRDb250ZW50ID0gY2FyZENhcHRpb247XG4gICAgc3VwZXIub3BlbigpO1xuICB9XG59XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBTZWN0aW9uIHtcbiAgY29uc3RydWN0b3IoeyBpdGVtcywgcmVuZGVyZXIgfSwgY2xhc3NTZWxlY3Rvcikge1xuICAgIHRoaXMuX2l0ZW1zID0gaXRlbXM7XG4gICAgdGhpcy5fcmVuZGVyZXIgPSByZW5kZXJlcjtcbiAgICB0aGlzLl9lbGVtZW50Q29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihjbGFzc1NlbGVjdG9yKTtcbiAgfVxuXG4gIHJlbmRlckl0ZW1zKCkge1xuICAgIHRoaXMuX2l0ZW1zLmZvckVhY2goKGl0ZW0pID0+IHtcbiAgICAgIHRoaXMuX3JlbmRlcmVyKGl0ZW0pO1xuICAgIH0pO1xuICB9XG5cbiAgYWRkSXRlbShlbGVtZW50LCBwbGFjZW1lbnQpIHtcbiAgICBpZiAocGxhY2VtZW50ID09PSBcImFwcGVuZFwiKSB7XG4gICAgICB0aGlzLl9lbGVtZW50Q29udGFpbmVyLmFwcGVuZChlbGVtZW50KTtcbiAgICB9IGVsc2UgaWYgKHBsYWNlbWVudCA9PT0gXCJwcmVwZW5kXCIpIHtcbiAgICAgIHRoaXMuX2VsZW1lbnRDb250YWluZXIucHJlcGVuZChlbGVtZW50KTtcbiAgICB9XG4gIH1cbn1cbiJdLCJuYW1lcyI6WyJhZGRCdXR0b24iLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJlZGl0QnV0dG9uIiwicHJvZmlsZUluZm8iLCJuYW1lIiwic3VidGl0bGUiLCJwcm9maWxlRm9ybUluZm8iLCJDYXJkIiwiY29uc3RydWN0b3IiLCJkYXRhIiwiY2FyZFNlbGVjdG9yIiwiaGFuZGxlSW1hZ2VDbGljayIsInRoaXMiLCJfbmFtZSIsIl9saW5rIiwibGluayIsIl9jYXJkU2VsZWN0b3IiLCJfaGFuZGxlSW1hZ2VDbGljayIsIl9jYXJkVGVtcGxhdGUiLCJjb250ZW50IiwiZmlyc3RFbGVtZW50Q2hpbGQiLCJfaGFuZGxlTGlrZUNsaWNrIiwiX2xpa2VCdXR0b24iLCJjbGFzc0xpc3QiLCJ0b2dnbGUiLCJfaGFuZGxlRGVsZXRlQ2xpY2siLCJfY2FyZEVsZW1lbnQiLCJyZW1vdmUiLCJfc2V0RXZlbnRMaXN0ZW5lcnMiLCJhZGRFdmVudExpc3RlbmVyIiwiX2RlbGV0ZUJ1dHRvbiIsImNhcmRJbWFnZSIsImdlbmVyYXRlQ2FyZCIsImNsb25lTm9kZSIsImNhcmRDYXB0aW9uIiwic3JjIiwiYWx0IiwidGV4dENvbnRlbnQiLCJGb3JtVmFsaWRhdG9yIiwiY29uZmlnIiwiZm9ybVRvVmFsaWRhdGUiLCJfY29uZmlnIiwiX2Zvcm1FbGVtZW50IiwiX3Nob3dJbnB1dEVycm9yIiwiaW5wdXRFbGVtZW50IiwiX2Vycm9yTWVzc2FnZUVsZW1lbnQiLCJpZCIsImFkZCIsImlucHV0RXJyb3JDbGFzcyIsInZhbGlkYXRpb25NZXNzYWdlIiwiZXJyb3JDbGFzcyIsIl9oaWRlSW5wdXRFcnJvciIsInJlc2V0VmFsaWRhdGlvbiIsIl9pbnB1dEVsZW1lbnRzIiwiZm9yRWFjaCIsImRpc2FibGVTdWJtaXRCdXR0b24iLCJfY2hlY2tJbnB1dFZhbGlkaXR5IiwidmFsaWRpdHkiLCJ2YWxpZCIsIl9jaGVja0Zvcm1WYWxpZGl0eSIsImV2ZXJ5IiwiX3N1Ym1pdEJ1dHRvbiIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJkaXNhYmxlZCIsImVuYWJsZVN1Ym1pdEJ1dHRvbiIsIl90b2dnbGVCdXR0b25TdGF0ZSIsIl9pc0Zvcm1WYWxpZCIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJpbnB1dFNlbGVjdG9yIiwic3VibWl0QnV0dG9uU2VsZWN0b3IiLCJlbmFibGVWYWxpZGF0aW9uIiwiZXZ0IiwicHJldmVudERlZmF1bHQiLCJQb3B1cCIsInBvcHVwU2VsZWN0b3IiLCJfcG9wdXBFbGVtZW50IiwiX2Nsb3NlQnV0dG9uIiwib3BlbiIsIl9oYW5kbGVFc2NDbG9zZSIsImNsb3NlIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImtleSIsIl9oYW5kbGVDbGlja0Nsb3NlIiwidGFyZ2V0Iiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJQb3B1cFdpdGhGb3JtIiwiY2FsbGJhY2tGdW5jdGlvbiIsInN1cGVyIiwiX3BvcHVwRm9ybSIsIl9jYWxsYmFja0Z1bmN0aW9uIiwiX2dldElucHV0VmFsdWVzIiwiX2lucHV0VmFsdWVzIiwiQXJyYXkiLCJmcm9tIiwiX2RhdGEiLCJ2YWx1ZSIsImNsZWFyRm9ybSIsInJlc2V0IiwidXNlckluZm8iLCJfcmVmIiwiX3N1YnRpdGxlIiwiZ2V0VXNlckluZm8iLCJwcmVzZW50VXNlckluZm8iLCJzZXRVc2VySW5mbyIsImFkZEZvcm1Qb3B1cCIsImltYWdlSW5mbyIsImFkZGVkQ2FyZEVsZW1lbnQiLCJjcmVhdGVDYXJkIiwiY2FyZFNlY3Rpb24iLCJhZGRJdGVtIiwiZm9ybVZhbGlkYXRvcnMiLCJlZGl0Rm9ybVBvcHVwIiwibmV3UHJvZmlsZUluZm8iLCJpbWFnZVBvcHVwIiwiX3BvcHVwSW1hZ2UiLCJfcG9wdXBDYXB0aW9uIiwiY2FyZExpbmsiLCJjbGFzc1NlbGVjdG9yIiwiaXRlbXMiLCJyZW5kZXJlciIsIl9pdGVtcyIsIl9yZW5kZXJlciIsIl9lbGVtZW50Q29udGFpbmVyIiwicmVuZGVySXRlbXMiLCJpdGVtIiwiZWxlbWVudCIsInBsYWNlbWVudCIsImFwcGVuZCIsInByZXBlbmQiLCJjYXJkRWxlbWVudCIsImZvcm1TZWxlY3RvciIsImZvcm1FbGVtZW50IiwidmFsaWRhdG9yIiwiZm9ybU5hbWUiLCJnZXRBdHRyaWJ1dGUiXSwic291cmNlUm9vdCI6IiJ9